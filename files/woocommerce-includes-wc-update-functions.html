<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>WooCommerce Code Reference</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.png" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png"/>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/base.css?updated=1692866950">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/template.css?updated=1692866950">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
            <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8KCYZ2CYMS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8KCYZ2CYMS', {
		'content_group' : 'WooCommerce Core Code Reference',
	});
</script>
        <script src="../js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-top-header">
    <section class="phpdocumentor-section">
        <div class="site-branding">
            <a class="site-logo" href="../index.html"><img width="180" src="../images/logo.svg" alt="WooCommerce" /></a>
        </div>
        <nav class="main-navigation">
            <ul>
                <li><a href="../hooks/hooks.html">Hooks Reference</a></li>
                <li><a href="https://docs.woocommerce.com/">Documentation</a></li>
                <li><a href="https://woocommerce.github.io/woocommerce-rest-api-docs/">REST API Docs</a></li>
                <li><a href="https://woocommerce.com/careers/?utm_source=woocommerce+core+code+reference&utm_medium=devdocs&utm_campaign=woo+careers" target="_blank">We're hiring!</a></li>
            </ul>
        </nav>
    </section>
</header>

<div class="phpdocumentor-header">
    <section class="phpdocumentor-section">
        <h1 class="phpdocumentor-title">WooCommerce Code Reference</h1>
        <section class="phpdocumentor-search">
    <label class="phpdocumentor-label">
        <span class="visually-hidden">Search (click ESC to close search results)</span>
        <input id="autoComplete" tabindex="1" type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading..." disabled />
    </label>
</section>

    </section>
</div>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                <h3 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/default.html"><abbr title="\">Global</abbr></a></h3>
                                        <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/woocommerce.html"><abbr title="\WooCommerce">WooCommerce</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/woocommerce-admin.html"><abbr title="\WooCommerce\Admin">Admin</abbr></a></li>
                                    </ul>
                            <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/automattic.html"><abbr title="\Automattic">Automattic</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/automattic-woocommerce.html"><abbr title="\Automattic\WooCommerce">WooCommerce</abbr></a></li>
                                    </ul>
                        </section>

        <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                    <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerce.html"><abbr title="\WooCommerce">WooCommerce</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WooCommerce-Classes.html"><abbr title="\WooCommerce\Classes">Classes</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Abstracts.html"><abbr title="\WooCommerce\Abstracts">Abstracts</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Admin.html"><abbr title="\WooCommerce\Admin">Admin</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Helper.html"><abbr title="\WooCommerce\Helper">Helper</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Views.html"><abbr title="\WooCommerce\Views">Views</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Templates.html"><abbr title="\WooCommerce\Templates">Templates</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Reports.html"><abbr title="\WooCommerce\Reports">Reports</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Blocks.html"><abbr title="\WooCommerce\Blocks">Blocks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-RestApi.html"><abbr title="\WooCommerce\RestApi">RestApi</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-CLI.html"><abbr title="\WooCommerce\CLI">CLI</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-l10n.html"><abbr title="\WooCommerce\l10n">l10n</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Webhooks.html"><abbr title="\WooCommerce\Webhooks">Webhooks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-DataStores.html"><abbr title="\WooCommerce\DataStores">DataStores</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Emails.html"><abbr title="\WooCommerce\Emails">Emails</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Export.html"><abbr title="\WooCommerce\Export">Export</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Gateways.html"><abbr title="\WooCommerce\Gateways">Gateways</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-PayPal.html"><abbr title="\WooCommerce\PayPal">PayPal</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Import.html"><abbr title="\WooCommerce\Import">Import</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Integrations.html"><abbr title="\WooCommerce\Integrations">Integrations</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Interfaces.html"><abbr title="\WooCommerce\Interfaces">Interfaces</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Interface.html"><abbr title="\WooCommerce\Interface">Interface</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-LogHandlers.html"><abbr title="\WooCommerce\LogHandlers">LogHandlers</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-PaymentTokens.html"><abbr title="\WooCommerce\PaymentTokens">PaymentTokens</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Utilities.html"><abbr title="\WooCommerce\Utilities">Utilities</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Shipping.html"><abbr title="\WooCommerce\Shipping">Shipping</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Shortcodes.html"><abbr title="\WooCommerce\Shortcodes">Shortcodes</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Tracks.html"><abbr title="\WooCommerce\Tracks">Tracks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Traits.html"><abbr title="\WooCommerce\Traits">Traits</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Functions.html"><abbr title="\WooCommerce\Functions">Functions</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-WCCom.html"><abbr title="\WooCommerce\WCCom">WCCom</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-WCCOM.html"><abbr title="\WooCommerce\WCCOM">WCCOM</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Widgets.html"><abbr title="\WooCommerce\Widgets">Widgets</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Uninstaller.html"><abbr title="\WooCommerce\Uninstaller">Uninstaller</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WoocommerceAdmin.html"><abbr title="\WoocommerceAdmin">WoocommerceAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WoocommerceNavigation.html"><abbr title="\WoocommerceNavigation">WoocommerceNavigation</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/Automattic.html"><abbr title="\Automattic">Automattic</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/Automattic-WooCommerce.html"><abbr title="\Automattic\WooCommerce">WooCommerce</abbr></a></li>
                            </ul>
                        </section>
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../indices/files.html">Files</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../hooks/hooks.html">Hooks Reference</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">wc-update-functions.php</h2>

                

            <section class="phpdocumentor-functions">
        <h3 class="phpdocumentor-elements__header" id="functions">
            Functions
            <a href="#functions" class="headerlink"><i class="fas fa-link"></i></a>
        </h3>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_200_file_paths">
        wc_update_200_file_paths()
        <a href="#function_wc_update_200_file_paths" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.36">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">36</span>
</aside>

        <p class="phpdocumentor-summary">Update file paths for 2.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_200_file_paths</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_200_permalinks">
        wc_update_200_permalinks()
        <a href="#function_wc_update_200_permalinks" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.66">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">66</span>
</aside>

        <p class="phpdocumentor-summary">Update permalinks for 2.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_200_permalinks</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_200_subcat_display">
        wc_update_200_subcat_display()
        <a href="#function_wc_update_200_subcat_display" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.110">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">110</span>
</aside>

        <p class="phpdocumentor-summary">Update sub-category display options for 2.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_200_subcat_display</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_200_taxrates">
        wc_update_200_taxrates()
        <a href="#function_wc_update_200_taxrates" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.134">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">134</span>
</aside>

        <p class="phpdocumentor-summary">Update tax rates for 2.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_200_taxrates</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_200_line_items">
        wc_update_200_line_items()
        <a href="#function_wc_update_200_line_items" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.233">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">233</span>
</aside>

        <p class="phpdocumentor-summary">Update order item line items for 2.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_200_line_items</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_200_images">
        wc_update_200_images()
        <a href="#function_wc_update_200_images" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.373">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">373</span>
</aside>

        <p class="phpdocumentor-summary">Update image settings for 2.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_200_images</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_200_db_version">
        wc_update_200_db_version()
        <a href="#function_wc_update_200_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.401">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">401</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_200_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_209_brazillian_state">
        wc_update_209_brazillian_state()
        <a href="#function_wc_update_209_brazillian_state" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.410">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">410</span>
</aside>

        <p class="phpdocumentor-summary">Update Brazilian States for 2.0.9</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_209_brazillian_state</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_209_db_version">
        wc_update_209_db_version()
        <a href="#function_wc_update_209_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.465">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">465</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.0.9</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_209_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_210_remove_pages">
        wc_update_210_remove_pages()
        <a href="#function_wc_update_210_remove_pages" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.474">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">474</span>
</aside>

        <p class="phpdocumentor-summary">Remove pages for 2.1</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_210_remove_pages</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_210_file_paths">
        wc_update_210_file_paths()
        <a href="#function_wc_update_210_file_paths" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.489">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">489</span>
</aside>

        <p class="phpdocumentor-summary">Update file paths to support multiple files for 2.1</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_210_file_paths</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_210_db_version">
        wc_update_210_db_version()
        <a href="#function_wc_update_210_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.531">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">531</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.1</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_210_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_220_shipping">
        wc_update_220_shipping()
        <a href="#function_wc_update_220_shipping" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.540">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">540</span>
</aside>

        <p class="phpdocumentor-summary">Update shipping options for 2.2</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_220_shipping</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_220_order_status">
        wc_update_220_order_status()
        <a href="#function_wc_update_220_order_status" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.557">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">557</span>
</aside>

        <p class="phpdocumentor-summary">Update order statuses for 2.2</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_220_order_status</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_220_variations">
        wc_update_220_variations()
        <a href="#function_wc_update_220_variations" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.643">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">643</span>
</aside>

        <p class="phpdocumentor-summary">Update variations for 2.2</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_220_variations</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_220_attributes">
        wc_update_220_attributes()
        <a href="#function_wc_update_220_attributes" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.668">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">668</span>
</aside>

        <p class="phpdocumentor-summary">Update attributes for 2.2</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_220_attributes</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_220_db_version">
        wc_update_220_db_version()
        <a href="#function_wc_update_220_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.707">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">707</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.2</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_220_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_230_options">
        wc_update_230_options()
        <a href="#function_wc_update_230_options" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.716">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">716</span>
</aside>

        <p class="phpdocumentor-summary">Update options for 2.3</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_230_options</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_230_db_version">
        wc_update_230_db_version()
        <a href="#function_wc_update_230_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.733">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">733</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.3</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_230_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_240_options">
        wc_update_240_options()
        <a href="#function_wc_update_240_options" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.742">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">742</span>
</aside>

        <p class="phpdocumentor-summary">Update calc discount options for 2.4</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_240_options</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_240_shipping_methods">
        wc_update_240_shipping_methods()
        <a href="#function_wc_update_240_shipping_methods" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.755">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">755</span>
</aside>

        <p class="phpdocumentor-summary">Update shipping methods for 2.4</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_240_shipping_methods</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_240_api_keys">
        wc_update_240_api_keys()
        <a href="#function_wc_update_240_api_keys" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.831">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">831</span>
</aside>

        <p class="phpdocumentor-summary">Update API keys for 2.4</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_240_api_keys</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_240_webhooks">
        wc_update_240_webhooks()
        <a href="#function_wc_update_240_webhooks" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.882">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">882</span>
</aside>

        <p class="phpdocumentor-summary">Update webhooks for 2.4</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_240_webhooks</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_240_refunds">
        wc_update_240_refunds()
        <a href="#function_wc_update_240_refunds" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.910">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">910</span>
</aside>

        <p class="phpdocumentor-summary">Update refunds for 2.4</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_240_refunds</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_240_db_version">
        wc_update_240_db_version()
        <a href="#function_wc_update_240_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.964">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">964</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.4</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_240_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_241_variations">
        wc_update_241_variations()
        <a href="#function_wc_update_241_variations" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.973">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">973</span>
</aside>

        <p class="phpdocumentor-summary">Update variations for 2.4.1</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_241_variations</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_241_db_version">
        wc_update_241_db_version()
        <a href="#function_wc_update_241_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1005">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1005</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.4.1</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_241_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_250_currency">
        wc_update_250_currency()
        <a href="#function_wc_update_250_currency" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1014">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1014</span>
</aside>

        <p class="phpdocumentor-summary">Update currency settings for 2.5</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_250_currency</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_250_db_version">
        wc_update_250_db_version()
        <a href="#function_wc_update_250_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1045">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1045</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.5</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_250_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_260_options">
        wc_update_260_options()
        <a href="#function_wc_update_260_options" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1054">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1054</span>
</aside>

        <p class="phpdocumentor-summary">Update ship to countries options for 2.6</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_260_options</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_260_termmeta">
        wc_update_260_termmeta()
        <a href="#function_wc_update_260_termmeta" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1068">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1068</span>
</aside>

        <p class="phpdocumentor-summary">Update term meta for 2.6</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_260_termmeta</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_260_zones">
        wc_update_260_zones()
        <a href="#function_wc_update_260_zones" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1086">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1086</span>
</aside>

        <p class="phpdocumentor-summary">Update zones for 2.6</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_260_zones</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_260_zone_methods">
        wc_update_260_zone_methods()
        <a href="#function_wc_update_260_zone_methods" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1103">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1103</span>
</aside>

        <p class="phpdocumentor-summary">Update zone methods for 2.6</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_260_zone_methods</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_260_refunds">
        wc_update_260_refunds()
        <a href="#function_wc_update_260_refunds" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1188">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1188</span>
</aside>

        <p class="phpdocumentor-summary">Update refunds for 2.6</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_260_refunds</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_260_db_version">
        wc_update_260_db_version()
        <a href="#function_wc_update_260_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1207">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1207</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version for 2.6</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_260_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_300_webhooks">
        wc_update_300_webhooks()
        <a href="#function_wc_update_300_webhooks" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1216">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1216</span>
</aside>

        <p class="phpdocumentor-summary">Update webhooks for 3.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_300_webhooks</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_300_comment_type_index">
        wc_update_300_comment_type_index()
        <a href="#function_wc_update_300_comment_type_index" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1243">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1243</span>
</aside>

        <p class="phpdocumentor-summary">Add an index to the field comment_type to improve the response time of the query
used by WC_Comments::wp_count_comments() to get the number of comments by type.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_300_comment_type_index</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_300_grouped_products">
        wc_update_300_grouped_products()
        <a href="#function_wc_update_300_grouped_products" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1260">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1260</span>
</aside>

        <p class="phpdocumentor-summary">Update grouped products for 3.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_300_grouped_products</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_300_settings">
        wc_update_300_settings()
        <a href="#function_wc_update_300_settings" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1295">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1295</span>
</aside>

        <p class="phpdocumentor-summary">Update shipping tax classes for 3.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_300_settings</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_300_product_visibility">
        wc_update_300_product_visibility()
        <a href="#function_wc_update_300_product_visibility" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1307">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1307</span>
</aside>

        <p class="phpdocumentor-summary">Convert meta values into term for product visibility.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_300_product_visibility</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_300_db_version">
        wc_update_300_db_version()
        <a href="#function_wc_update_300_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1370">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1370</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_300_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_310_downloadable_products">
        wc_update_310_downloadable_products()
        <a href="#function_wc_update_310_downloadable_products" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1377">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1377</span>
</aside>

        <p class="phpdocumentor-summary">Add an index to the downloadable product permissions table to improve performance of update_user_by_order_id.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_310_downloadable_products</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_310_old_comments">
        wc_update_310_old_comments()
        <a href="#function_wc_update_310_old_comments" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1390">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1390</span>
</aside>

        <p class="phpdocumentor-summary">Find old order notes and ensure they have the correct type for exclusion.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_310_old_comments</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_310_db_version">
        wc_update_310_db_version()
        <a href="#function_wc_update_310_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1399">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1399</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_310_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_312_shop_manager_capabilities">
        wc_update_312_shop_manager_capabilities()
        <a href="#function_wc_update_312_shop_manager_capabilities" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1406">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1406</span>
</aside>

        <p class="phpdocumentor-summary">Update shop_manager capabilities.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_312_shop_manager_capabilities</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_312_db_version">
        wc_update_312_db_version()
        <a href="#function_wc_update_312_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1414">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1414</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_312_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_320_mexican_states">
        wc_update_320_mexican_states()
        <a href="#function_wc_update_320_mexican_states" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1421">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1421</span>
</aside>

        <p class="phpdocumentor-summary">Update state codes for Mexico.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_320_mexican_states</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_320_db_version">
        wc_update_320_db_version()
        <a href="#function_wc_update_320_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1494">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1494</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_320_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_330_image_options">
        wc_update_330_image_options()
        <a href="#function_wc_update_330_image_options" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1501">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1501</span>
</aside>

        <p class="phpdocumentor-summary">Update image settings to use new aspect ratios and widths.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_330_image_options</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_330_webhooks">
        wc_update_330_webhooks()
        <a href="#function_wc_update_330_webhooks" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1546">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1546</span>
</aside>

        <p class="phpdocumentor-summary">Migrate webhooks from post type to CRUD.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_330_webhooks</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_330_set_default_product_cat">
        wc_update_330_set_default_product_cat()
        <a href="#function_wc_update_330_set_default_product_cat" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1585">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1585</span>
</aside>

        <p class="phpdocumentor-summary">Assign default cat to all products with no cats.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_330_set_default_product_cat</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_330_product_stock_status">
        wc_update_330_product_stock_status()
        <a href="#function_wc_update_330_product_stock_status" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1597">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1597</span>
</aside>

        <p class="phpdocumentor-summary">Update product stock status to use the new onbackorder status.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_330_product_stock_status</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_330_clear_transients">
        wc_update_330_clear_transients()
        <a href="#function_wc_update_330_clear_transients" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1640">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1640</span>
</aside>

        <p class="phpdocumentor-summary">Clear addons page transients</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_330_clear_transients</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_330_set_paypal_sandbox_credentials">
        wc_update_330_set_paypal_sandbox_credentials()
        <a href="#function_wc_update_330_set_paypal_sandbox_credentials" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1648">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1648</span>
</aside>

        <p class="phpdocumentor-summary">Set PayPal&#039;s sandbox credentials.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_330_set_paypal_sandbox_credentials</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_330_db_version">
        wc_update_330_db_version()
        <a href="#function_wc_update_330_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1666">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1666</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_330_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_340_states">
        wc_update_340_states()
        <a href="#function_wc_update_340_states" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1673">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1673</span>
</aside>

        <p class="phpdocumentor-summary">Update state codes for Ireland and BD.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_340_states</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_340_state">
        wc_update_340_state()
        <a href="#function_wc_update_340_state" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1756">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1756</span>
</aside>

        <p class="phpdocumentor-summary">Update next state in the queue.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_340_state</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_340_last_active">
        wc_update_340_last_active()
        <a href="#function_wc_update_340_last_active" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1816">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1816</span>
</aside>

        <p class="phpdocumentor-summary">Set last active prop for users.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_340_last_active</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_340_db_version">
        wc_update_340_db_version()
        <a href="#function_wc_update_340_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1836">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1836</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_340_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_343_cleanup_foreign_keys">
        wc_update_343_cleanup_foreign_keys()
        <a href="#function_wc_update_343_cleanup_foreign_keys" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1845">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1845</span>
</aside>

        <p class="phpdocumentor-summary">Remove duplicate foreign keys</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_343_cleanup_foreign_keys</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_343_db_version">
        wc_update_343_db_version()
        <a href="#function_wc_update_343_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1865">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1865</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_343_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_344_recreate_roles">
        wc_update_344_recreate_roles()
        <a href="#function_wc_update_344_recreate_roles" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1874">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1874</span>
</aside>

        <p class="phpdocumentor-summary">Recreate user roles so existing users will get the new capabilities.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_344_recreate_roles</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_344_db_version">
        wc_update_344_db_version()
        <a href="#function_wc_update_344_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1884">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1884</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_344_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_350_reviews_comment_type">
        wc_update_350_reviews_comment_type()
        <a href="#function_wc_update_350_reviews_comment_type" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1891">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1891</span>
</aside>

        <p class="phpdocumentor-summary">Set the comment type to &#039;review&#039; for product reviews that don&#039;t have a comment type.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_350_reviews_comment_type</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_350_db_version">
        wc_update_350_db_version()
        <a href="#function_wc_update_350_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1902">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1902</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_350_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_352_drop_download_log_fk">
        wc_update_352_drop_download_log_fk()
        <a href="#function_wc_update_352_drop_download_log_fk" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1911">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1911</span>
</aside>

        <p class="phpdocumentor-summary">Drop the fk_wc_download_log_permission_id FK as we use a new one with the table and blog prefix for MS compatibility.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_352_drop_download_log_fk</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_354_modify_shop_manager_caps">
        wc_update_354_modify_shop_manager_caps()
        <a href="#function_wc_update_354_modify_shop_manager_caps" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1927">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1927</span>
</aside>

        <p class="phpdocumentor-summary">Remove edit_user capabilities from shop managers and use &quot;translated&quot; capabilities instead.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_354_modify_shop_manager_caps</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>See wc_shop_manager_has_capability function.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_354_db_version">
        wc_update_354_db_version()
        <a href="#function_wc_update_354_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1944">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1944</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_354_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_360_product_lookup_tables">
        wc_update_360_product_lookup_tables()
        <a href="#function_wc_update_360_product_lookup_tables" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1951">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1951</span>
</aside>

        <p class="phpdocumentor-summary">Update product lookup tables in bulk.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_360_product_lookup_tables</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_360_term_meta">
        wc_update_360_term_meta()
        <a href="#function_wc_update_360_term_meta" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1958">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1958</span>
</aside>

        <p class="phpdocumentor-summary">Renames ordering meta to be consistent across taxonomies.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_360_term_meta</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_360_downloadable_product_permissions_index">
        wc_update_360_downloadable_product_permissions_index()
        <a href="#function_wc_update_360_downloadable_product_permissions_index" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1969">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1969</span>
</aside>

        <p class="phpdocumentor-summary">Add new user_order_remaining_expires to speed up user download permission fetching.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_360_downloadable_product_permissions_index</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_360_db_version">
        wc_update_360_db_version()
        <a href="#function_wc_update_360_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1982">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1982</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_360_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_370_tax_rate_classes">
        wc_update_370_tax_rate_classes()
        <a href="#function_wc_update_370_tax_rate_classes" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.1991">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">1991</span>
</aside>

        <p class="phpdocumentor-summary">Put tax classes into a DB table.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_370_tax_rate_classes</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_370_mro_std_currency">
        wc_update_370_mro_std_currency()
        <a href="#function_wc_update_370_mro_std_currency" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2012">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2012</span>
</aside>

        <p class="phpdocumentor-summary">Update currency settings for 3.7.0</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_370_mro_std_currency</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_370_db_version">
        wc_update_370_db_version()
        <a href="#function_wc_update_370_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2054">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2054</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_370_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_390_move_maxmind_database">
        wc_update_390_move_maxmind_database()
        <a href="#function_wc_update_390_move_maxmind_database" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2062">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2062</span>
</aside>

        <p class="phpdocumentor-summary">We&#039;ve moved the MaxMind database to a new location, as per the TOS&#039; requirement that the database not
be publicly accessible.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_390_move_maxmind_database</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_390_change_geolocation_database_update_cron">
        wc_update_390_change_geolocation_database_update_cron()
        <a href="#function_wc_update_390_change_geolocation_database_update_cron" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2083">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2083</span>
</aside>

        <p class="phpdocumentor-summary">So that we can best meet MaxMind&#039;s TOS, the geolocation database update cron should run once per 15 days.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_390_change_geolocation_database_update_cron</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_390_db_version">
        wc_update_390_db_version()
        <a href="#function_wc_update_390_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2091">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2091</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_390_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_400_increase_size_of_column">
        wc_update_400_increase_size_of_column()
        <a href="#function_wc_update_400_increase_size_of_column" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2098">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2098</span>
</aside>

        <p class="phpdocumentor-summary">Increase column size</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_400_increase_size_of_column</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_400_reset_action_scheduler_migration_status">
        wc_update_400_reset_action_scheduler_migration_status()
        <a href="#function_wc_update_400_reset_action_scheduler_migration_status" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2107">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2107</span>
</aside>

        <p class="phpdocumentor-summary">Reset ActionScheduler migration status. Needs AS &gt;= 3.0 shipped with WC &gt;= 4.0.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_400_reset_action_scheduler_migration_status</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_400_db_version">
        wc_update_400_db_version()
        <a href="#function_wc_update_400_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2119">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2119</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_400_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_440_insert_attribute_terms_for_variable_products">
        wc_update_440_insert_attribute_terms_for_variable_products()
        <a href="#function_wc_update_440_insert_attribute_terms_for_variable_products" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2133">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2133</span>
</aside>

        <p class="phpdocumentor-summary">Register attributes as terms for variable products, in increments of 100 products.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_440_insert_attribute_terms_for_variable_products</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

        <section class="phpdocumentor-description"><p>This migration was added to support a new mechanism to improve the filtering of
variable products by attribute (https://github.com/woocommerce/woocommerce/pull/26260),
however that mechanism was later reverted (https://github.com/woocommerce/woocommerce/pull/27625)
due to numerous issues found. Thus the migration is no longer needed.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_440_db_version">
        wc_update_440_db_version()
        <a href="#function_wc_update_440_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2140">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2140</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_440_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_450_db_version">
        wc_update_450_db_version()
        <a href="#function_wc_update_450_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2147">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2147</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version to 4.5.0.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_450_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_450_sanitize_coupons_code">
        wc_update_450_sanitize_coupons_code()
        <a href="#function_wc_update_450_sanitize_coupons_code" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2156">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2156</span>
</aside>

        <p class="phpdocumentor-summary">Sanitize all coupons code.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_450_sanitize_coupons_code</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_500_fix_product_review_count">
        wc_update_500_fix_product_review_count()
        <a href="#function_wc_update_500_fix_product_review_count" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2216">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2216</span>
</aside>

        <p class="phpdocumentor-summary">Fixes product review count that might have been incorrect.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_500_fix_product_review_count</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>See @link https://github.com/woocommerce/woocommerce/issues/27688.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_500_db_version">
        wc_update_500_db_version()
        <a href="#function_wc_update_500_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2271">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2271</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version to 5.0.0.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_500_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_560_create_refund_returns_page">
        wc_update_560_create_refund_returns_page()
        <a href="#function_wc_update_560_create_refund_returns_page" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2280">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2280</span>
</aside>

        <p class="phpdocumentor-summary">Creates the refund and returns policy page.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_560_create_refund_returns_page</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>See @link https://github.com/woocommerce/woocommerce/issues/29235.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_560_db_version">
        wc_update_560_db_version()
        <a href="#function_wc_update_560_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2302">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2302</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version to 5.6.0.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_560_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_600_migrate_rate_limit_options">
        wc_update_600_migrate_rate_limit_options()
        <a href="#function_wc_update_600_migrate_rate_limit_options" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2311">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2311</span>
</aside>

        <p class="phpdocumentor-summary">Migrate rate limit options to the new table.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_600_migrate_rate_limit_options</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>See @link https://github.com/woocommerce/woocommerce/issues/27103.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_600_db_version">
        wc_update_600_db_version()
        <a href="#function_wc_update_600_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2340">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2340</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version to 6.0.0.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_600_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_630_create_product_attributes_lookup_table">
        wc_update_630_create_product_attributes_lookup_table()
        <a href="#function_wc_update_630_create_product_attributes_lookup_table" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2350">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2350</span>
</aside>

        <p class="phpdocumentor-summary">Create the product attributes lookup table and initiate its filling,
unless the table had been already created manually (via the tools page).</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_630_create_product_attributes_lookup_table</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">false</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_630_db_version">
        wc_update_630_db_version()
        <a href="#function_wc_update_630_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2369">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2369</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version to 6.3.0.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_630_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_640_add_primary_key_to_product_attributes_lookup_table">
        wc_update_640_add_primary_key_to_product_attributes_lookup_table()
        <a href="#function_wc_update_640_add_primary_key_to_product_attributes_lookup_table" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2378">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2378</span>
</aside>

        <p class="phpdocumentor-summary">Create the primary key for the product attributes lookup table if it doesn&#039;t exist already.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_640_add_primary_key_to_product_attributes_lookup_table</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">bool</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_640_db_version">
        wc_update_640_db_version()
        <a href="#function_wc_update_640_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2388">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2388</span>
</aside>

        <p class="phpdocumentor-summary">Update DB version to 6.4.0.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_640_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_650_approved_download_directories">
        wc_update_650_approved_download_directories()
        <a href="#function_wc_update_650_approved_download_directories" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2397">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2397</span>
</aside>

        <p class="phpdocumentor-summary">Add the standard WooCommerce upload directories to the Approved Product Download Directories list
and start populating it based on existing product download URLs, but do not enable the feature
(for existing installations, a site admin should review and make a conscious decision to enable).</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_650_approved_download_directories</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_651_approved_download_directories">
        wc_update_651_approved_download_directories()
        <a href="#function_wc_update_651_approved_download_directories" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2407">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2407</span>
</aside>

        <p class="phpdocumentor-summary">In some cases, the approved download directories table may not have been successfully created during the update to
6.5.0. If this was the case we will need to re-initialize the feature.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_651_approved_download_directories</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_670_purge_comments_count_cache">
        wc_update_670_purge_comments_count_cache()
        <a href="#function_wc_update_670_purge_comments_count_cache" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2432">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2432</span>
</aside>

        <p class="phpdocumentor-summary">Purges the comments count cache after 6.7.0 split reviews from the comments page.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_670_purge_comments_count_cache</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_700_remove_download_log_fk">
        wc_update_700_remove_download_log_fk()
        <a href="#function_wc_update_700_remove_download_log_fk" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2444">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2444</span>
</aside>

        <p class="phpdocumentor-summary">Remove unnecessary foreign keys.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_700_remove_download_log_fk</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_700_remove_recommended_marketing_plugins_transient">
        wc_update_700_remove_recommended_marketing_plugins_transient()
        <a href="#function_wc_update_700_remove_recommended_marketing_plugins_transient" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2461">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2461</span>
</aside>

        <p class="phpdocumentor-summary">Remove the transient data for recommended marketing extensions.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_700_remove_recommended_marketing_plugins_transient</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_721_adjust_new_zealand_states">
        wc_update_721_adjust_new_zealand_states()
        <a href="#function_wc_update_721_adjust_new_zealand_states" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2469">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2469</span>
</aside>

        <p class="phpdocumentor-summary">Update the New Zealand state codes in the database
after they were updated in code to the CLDR standard.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_721_adjust_new_zealand_states</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_721_adjust_ukraine_states">
        wc_update_721_adjust_ukraine_states()
        <a href="#function_wc_update_721_adjust_ukraine_states" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2497">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2497</span>
</aside>

        <p class="phpdocumentor-summary">Update the Ukraine state codes in the database
after they were updated in code to the CLDR standard.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_721_adjust_ukraine_states</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_722_adjust_new_zealand_states">
        wc_update_722_adjust_new_zealand_states()
        <a href="#function_wc_update_722_adjust_new_zealand_states" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2536">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2536</span>
</aside>

        <p class="phpdocumentor-summary">Update the New Zealand state codes in the database after they were updated in code to the CLDR standard.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_722_adjust_new_zealand_states</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>This is a simple wrapper for the corresponding 7.2.1 update function. The reason we do this (instead of
reusing the original function directly) is for better traceability in the Action Scheduler log, in case
of problems.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_722_adjust_ukraine_states">
        wc_update_722_adjust_ukraine_states()
        <a href="#function_wc_update_722_adjust_ukraine_states" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2547">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2547</span>
</aside>

        <p class="phpdocumentor-summary">Update the Ukraine state codes in the database after they were updated in code to the CLDR standard.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_722_adjust_ukraine_states</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>This is a simple wrapper for the corresponding 7.2.1 update function. The reason we do this (instead of
reusing the original function directly) is for better traceability in the Action Scheduler log, in case
of problems.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_750_add_columns_to_order_stats_table">
        wc_update_750_add_columns_to_order_stats_table()
        <a href="#function_wc_update_750_add_columns_to_order_stats_table" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2555">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2555</span>
</aside>

        <p class="phpdocumentor-summary">Add new columns date_paid and date_completed to wp_wc_order_stats table in order to provide the option
of using the dates in the reports</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_750_add_columns_to_order_stats_table</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_750_disable_new_product_management_experience">
        wc_update_750_disable_new_product_management_experience()
        <a href="#function_wc_update_750_disable_new_product_management_experience" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2581">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2581</span>
</aside>

        <p class="phpdocumentor-summary">Disable the experimental product management experience.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_750_disable_new_product_management_experience</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_770_remove_multichannel_marketing_feature_options">
        wc_update_770_remove_multichannel_marketing_feature_options()
        <a href="#function_wc_update_770_remove_multichannel_marketing_feature_options" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/wc-update-functions.php"><a href="../files/woocommerce-includes-wc-update-functions.html#source-view.2590">includes/wc-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">2590</span>
</aside>

        <p class="phpdocumentor-summary">Remove the multichannel marketing feature flag and options. This feature is now enabled by default.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_770_remove_multichannel_marketing_feature_options</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
            </section>

                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php
/**
 * WooCommerce Updates
 *
 * Functions for updating data, used by the background updater. These functions must be included
 * in the list returned by WC_Install::get_db_update_callbacks.
 *
 * Please note that these functions are invoked when WooCommerce is updated from a previous version,
 * but NOT when WooCommerce is newly installed.
 *
 * Database schema changes must be incorporated to the SQL returned by WC_Install::get_schema, which is applied
 * via dbDelta at both install and update time. If any other kind of database change is required
 * at install time (e.g. populating tables), use the &#039;woocommerce_installed&#039; hook.
 *
 * @package WooCommerce\Functions
 * @version 3.3.0
 */

defined( &#039;ABSPATH&#039; ) || exit;

use Automattic\WooCommerce\Database\Migrations\MigrationHelper;
use Automattic\WooCommerce\Internal\Admin\Marketing\MarketingSpecs;
use Automattic\WooCommerce\Internal\AssignDefaultCategory;
use Automattic\WooCommerce\Internal\DataStores\Orders\OrdersTableDataStore;
use Automattic\WooCommerce\Internal\ProductAttributesLookup\DataRegenerator;
use Automattic\WooCommerce\Internal\ProductAttributesLookup\LookupDataStore;
use Automattic\WooCommerce\Internal\ProductDownloads\ApprovedDirectories\Register as Download_Directories;
use Automattic\WooCommerce\Internal\ProductDownloads\ApprovedDirectories\Synchronize as Download_Directories_Sync;
use Automattic\WooCommerce\Utilities\StringUtil;

/**
 * Update file paths for 2.0
 *
 * @return void
 */
function wc_update_200_file_paths() {
	global $wpdb;

	// Upgrade old style files paths to support multiple file paths.
	$existing_file_paths = $wpdb-&gt;get_results( &quot;SELECT meta_value, meta_id, post_id FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_file_path&#039; AND meta_value != &#039;&#039;;&quot; );

	if ( $existing_file_paths ) {

		foreach ( $existing_file_paths as $existing_file_path ) {

			$old_file_path = trim( $existing_file_path-&gt;meta_value );

			if ( ! empty( $old_file_path ) ) {
				// phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.serialize_serialize
				$file_paths = serialize( array( md5( $old_file_path ) =&gt; $old_file_path ) );

				$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;UPDATE {$wpdb-&gt;postmeta} SET meta_key = &#039;_file_paths&#039;, meta_value = %s WHERE meta_id = %d&quot;, $file_paths, $existing_file_path-&gt;meta_id ) );

				$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;UPDATE {$wpdb-&gt;prefix}woocommerce_downloadable_product_permissions SET download_id = %s WHERE product_id = %d&quot;, md5( $old_file_path ), $existing_file_path-&gt;post_id ) );

			}
		}
	}
}

/**
 * Update permalinks for 2.0
 *
 * @return void
 */
function wc_update_200_permalinks() {
	// Setup default permalinks if shop page is defined.
	$permalinks   = get_option( &#039;woocommerce_permalinks&#039; );
	$shop_page_id = wc_get_page_id( &#039;shop&#039; );

	if ( empty( $permalinks ) &amp;&amp; $shop_page_id &gt; 0 ) {

		$base_slug = $shop_page_id &gt; 0 &amp;&amp; get_post( $shop_page_id ) ? get_page_uri( $shop_page_id ) : &#039;shop&#039;;

		$category_base = &#039;yes&#039; === get_option( &#039;woocommerce_prepend_shop_page_to_urls&#039; ) ? trailingslashit( $base_slug ) : &#039;&#039;;
		$category_slug = get_option( &#039;woocommerce_product_category_slug&#039; ) ? get_option( &#039;woocommerce_product_category_slug&#039; ) : _x( &#039;product-category&#039;, &#039;slug&#039;, &#039;woocommerce&#039; );
		$tag_slug      = get_option( &#039;woocommerce_product_tag_slug&#039; ) ? get_option( &#039;woocommerce_product_tag_slug&#039; ) : _x( &#039;product-tag&#039;, &#039;slug&#039;, &#039;woocommerce&#039; );

		if ( &#039;yes&#039; === get_option( &#039;woocommerce_prepend_shop_page_to_products&#039; ) ) {
			$product_base = trailingslashit( $base_slug );
		} else {
			$product_slug = get_option( &#039;woocommerce_product_slug&#039; );
			if ( false !== $product_slug &amp;&amp; ! empty( $product_slug ) ) {
				$product_base = trailingslashit( $product_slug );
			} else {
				$product_base = trailingslashit( _x( &#039;product&#039;, &#039;slug&#039;, &#039;woocommerce&#039; ) );
			}
		}

		if ( &#039;yes&#039; === get_option( &#039;woocommerce_prepend_category_to_products&#039; ) ) {
			$product_base .= trailingslashit( &#039;%product_cat%&#039; );
		}

		$permalinks = array(
			&#039;product_base&#039;   =&gt; untrailingslashit( $product_base ),
			&#039;category_base&#039;  =&gt; untrailingslashit( $category_base . $category_slug ),
			&#039;attribute_base&#039; =&gt; untrailingslashit( $category_base ),
			&#039;tag_base&#039;       =&gt; untrailingslashit( $category_base . $tag_slug ),
		);

		update_option( &#039;woocommerce_permalinks&#039;, $permalinks );
	}
}

/**
 * Update sub-category display options for 2.0
 *
 * @return void
 */
function wc_update_200_subcat_display() {
	// Update subcat display settings.
	if ( &#039;yes&#039; === get_option( &#039;woocommerce_shop_show_subcategories&#039; ) ) {
		if ( &#039;yes&#039; === get_option( &#039;woocommerce_hide_products_when_showing_subcategories&#039; ) ) {
			update_option( &#039;woocommerce_shop_page_display&#039;, &#039;subcategories&#039; );
		} else {
			update_option( &#039;woocommerce_shop_page_display&#039;, &#039;both&#039; );
		}
	}

	if ( &#039;yes&#039; === get_option( &#039;woocommerce_show_subcategories&#039; ) ) {
		if ( &#039;yes&#039; === get_option( &#039;woocommerce_hide_products_when_showing_subcategories&#039; ) ) {
			update_option( &#039;woocommerce_category_archive_display&#039;, &#039;subcategories&#039; );
		} else {
			update_option( &#039;woocommerce_category_archive_display&#039;, &#039;both&#039; );
		}
	}
}

/**
 * Update tax rates for 2.0
 *
 * @return void
 */
function wc_update_200_taxrates() {
	global $wpdb;

	// Update tax rates.
	$loop      = 0;
	$tax_rates = get_option( &#039;woocommerce_tax_rates&#039; );

	if ( $tax_rates ) {
		foreach ( $tax_rates as $tax_rate ) {

			foreach ( $tax_rate[&#039;countries&#039;] as $country =&gt; $states ) {

				$states = array_reverse( $states );

				foreach ( $states as $state ) {

					if ( &#039;*&#039; === $state ) {
						$state = &#039;&#039;;
					}

					$wpdb-&gt;insert(
						$wpdb-&gt;prefix . &#039;woocommerce_tax_rates&#039;,
						array(
							&#039;tax_rate_country&#039;  =&gt; $country,
							&#039;tax_rate_state&#039;    =&gt; $state,
							&#039;tax_rate&#039;          =&gt; $tax_rate[&#039;rate&#039;],
							&#039;tax_rate_name&#039;     =&gt; $tax_rate[&#039;label&#039;],
							&#039;tax_rate_priority&#039; =&gt; 1,
							&#039;tax_rate_compound&#039; =&gt; ( &#039;yes&#039; === $tax_rate[&#039;compound&#039;] ) ? 1 : 0,
							&#039;tax_rate_shipping&#039; =&gt; ( &#039;yes&#039; === $tax_rate[&#039;shipping&#039;] ) ? 1 : 0,
							&#039;tax_rate_order&#039;    =&gt; $loop,
							&#039;tax_rate_class&#039;    =&gt; $tax_rate[&#039;class&#039;],
						)
					);

					$loop++;
				}
			}
		}
	}

	$local_tax_rates = get_option( &#039;woocommerce_local_tax_rates&#039; );

	if ( $local_tax_rates ) {
		foreach ( $local_tax_rates as $tax_rate ) {

			$location_type = ( &#039;postcode&#039; === $tax_rate[&#039;location_type&#039;] ) ? &#039;postcode&#039; : &#039;city&#039;;

			if ( &#039;*&#039; === $tax_rate[&#039;state&#039;] ) {
				$tax_rate[&#039;state&#039;] = &#039;&#039;;
			}

			$wpdb-&gt;insert(
				$wpdb-&gt;prefix . &#039;woocommerce_tax_rates&#039;,
				array(
					&#039;tax_rate_country&#039;  =&gt; $tax_rate[&#039;country&#039;],
					&#039;tax_rate_state&#039;    =&gt; $tax_rate[&#039;state&#039;],
					&#039;tax_rate&#039;          =&gt; $tax_rate[&#039;rate&#039;],
					&#039;tax_rate_name&#039;     =&gt; $tax_rate[&#039;label&#039;],
					&#039;tax_rate_priority&#039; =&gt; 2,
					&#039;tax_rate_compound&#039; =&gt; ( &#039;yes&#039; === $tax_rate[&#039;compound&#039;] ) ? 1 : 0,
					&#039;tax_rate_shipping&#039; =&gt; ( &#039;yes&#039; === $tax_rate[&#039;shipping&#039;] ) ? 1 : 0,
					&#039;tax_rate_order&#039;    =&gt; $loop,
					&#039;tax_rate_class&#039;    =&gt; $tax_rate[&#039;class&#039;],
				)
			);

			$tax_rate_id = $wpdb-&gt;insert_id;

			if ( $tax_rate[&#039;locations&#039;] ) {
				foreach ( $tax_rate[&#039;locations&#039;] as $location ) {

					$wpdb-&gt;insert(
						$wpdb-&gt;prefix . &#039;woocommerce_tax_rate_locations&#039;,
						array(
							&#039;location_code&#039; =&gt; $location,
							&#039;tax_rate_id&#039;   =&gt; $tax_rate_id,
							&#039;location_type&#039; =&gt; $location_type,
						)
					);

				}
			}

			$loop++;
		}
	}

	update_option( &#039;woocommerce_tax_rates_backup&#039;, $tax_rates );
	update_option( &#039;woocommerce_local_tax_rates_backup&#039;, $local_tax_rates );
	delete_option( &#039;woocommerce_tax_rates&#039; );
	delete_option( &#039;woocommerce_local_tax_rates&#039; );
}

/**
 * Update order item line items for 2.0
 *
 * @return void
 */
function wc_update_200_line_items() {
	global $wpdb;

	// Now its time for the massive update to line items - move them to the new DB tables.
	// Reverse with UPDATE `wpwc_postmeta` SET meta_key = &#039;_order_items&#039; WHERE meta_key = &#039;_order_items_old&#039;.
	$order_item_rows = $wpdb-&gt;get_results(
		&quot;SELECT meta_value, post_id FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_order_items&#039;&quot;
	);

	foreach ( $order_item_rows as $order_item_row ) {

		$order_items = (array) maybe_unserialize( $order_item_row-&gt;meta_value );

		foreach ( $order_items as $order_item ) {

			if ( ! isset( $order_item[&#039;line_total&#039;] ) &amp;&amp; isset( $order_item[&#039;taxrate&#039;] ) &amp;&amp; isset( $order_item[&#039;cost&#039;] ) ) {
				$order_item[&#039;line_tax&#039;]          = number_format( ( $order_item[&#039;cost&#039;] * $order_item[&#039;qty&#039;] ) * ( $order_item[&#039;taxrate&#039;] / 100 ), 2, &#039;.&#039;, &#039;&#039; );
				$order_item[&#039;line_total&#039;]        = $order_item[&#039;cost&#039;] * $order_item[&#039;qty&#039;];
				$order_item[&#039;line_subtotal_tax&#039;] = $order_item[&#039;line_tax&#039;];
				$order_item[&#039;line_subtotal&#039;]     = $order_item[&#039;line_total&#039;];
			}

			$order_item[&#039;line_tax&#039;]          = isset( $order_item[&#039;line_tax&#039;] ) ? $order_item[&#039;line_tax&#039;] : 0;
			$order_item[&#039;line_total&#039;]        = isset( $order_item[&#039;line_total&#039;] ) ? $order_item[&#039;line_total&#039;] : 0;
			$order_item[&#039;line_subtotal_tax&#039;] = isset( $order_item[&#039;line_subtotal_tax&#039;] ) ? $order_item[&#039;line_subtotal_tax&#039;] : 0;
			$order_item[&#039;line_subtotal&#039;]     = isset( $order_item[&#039;line_subtotal&#039;] ) ? $order_item[&#039;line_subtotal&#039;] : 0;

			$item_id = wc_add_order_item(
				$order_item_row-&gt;post_id,
				array(
					&#039;order_item_name&#039; =&gt; $order_item[&#039;name&#039;],
					&#039;order_item_type&#039; =&gt; &#039;line_item&#039;,
				)
			);

			// Add line item meta.
			if ( $item_id ) {
				wc_add_order_item_meta( $item_id, &#039;_qty&#039;, absint( $order_item[&#039;qty&#039;] ) );
				wc_add_order_item_meta( $item_id, &#039;_tax_class&#039;, $order_item[&#039;tax_class&#039;] );
				wc_add_order_item_meta( $item_id, &#039;_product_id&#039;, $order_item[&#039;id&#039;] );
				wc_add_order_item_meta( $item_id, &#039;_variation_id&#039;, $order_item[&#039;variation_id&#039;] );
				wc_add_order_item_meta( $item_id, &#039;_line_subtotal&#039;, wc_format_decimal( $order_item[&#039;line_subtotal&#039;] ) );
				wc_add_order_item_meta( $item_id, &#039;_line_subtotal_tax&#039;, wc_format_decimal( $order_item[&#039;line_subtotal_tax&#039;] ) );
				wc_add_order_item_meta( $item_id, &#039;_line_total&#039;, wc_format_decimal( $order_item[&#039;line_total&#039;] ) );
				wc_add_order_item_meta( $item_id, &#039;_line_tax&#039;, wc_format_decimal( $order_item[&#039;line_tax&#039;] ) );

				$meta_rows = array();

				// Insert meta.
				if ( ! empty( $order_item[&#039;item_meta&#039;] ) ) {
					foreach ( $order_item[&#039;item_meta&#039;] as $key =&gt; $meta ) {
						// Backwards compatibility.
						if ( is_array( $meta ) &amp;&amp; isset( $meta[&#039;meta_name&#039;] ) ) {
							$meta_rows[] = &#039;(&#039; . $item_id . &#039;,&quot;&#039; . esc_sql( $meta[&#039;meta_name&#039;] ) . &#039;&quot;,&quot;&#039; . esc_sql( $meta[&#039;meta_value&#039;] ) . &#039;&quot;)&#039;;
						} else {
							$meta_rows[] = &#039;(&#039; . $item_id . &#039;,&quot;&#039; . esc_sql( $key ) . &#039;&quot;,&quot;&#039; . esc_sql( $meta ) . &#039;&quot;)&#039;;
						}
					}
				}

				// Insert meta rows at once.
				if ( count( $meta_rows ) &gt; 0 ) {
					$wpdb-&gt;query(
						$wpdb-&gt;prepare(
							&quot;INSERT INTO {$wpdb-&gt;prefix}woocommerce_order_itemmeta ( order_item_id, meta_key, meta_value )
							VALUES &quot; . implode( &#039;,&#039;, $meta_rows ) . &#039;;&#039;, // @codingStandardsIgnoreLine
							$order_item_row-&gt;post_id
						)
					);
				}

				// Delete from DB (rename).
				$wpdb-&gt;query(
					$wpdb-&gt;prepare(
						&quot;UPDATE {$wpdb-&gt;postmeta}
						SET meta_key = &#039;_order_items_old&#039;
						WHERE meta_key = &#039;_order_items&#039;
						AND post_id = %d&quot;,
						$order_item_row-&gt;post_id
					)
				);
			}

			unset( $meta_rows, $item_id, $order_item );
		}
	}

	// Do the same kind of update for order_taxes - move to lines.
	// Reverse with UPDATE `wpwc_postmeta` SET meta_key = &#039;_order_taxes&#039; WHERE meta_key = &#039;_order_taxes_old&#039;.
	$order_tax_rows = $wpdb-&gt;get_results(
		&quot;SELECT meta_value, post_id FROM {$wpdb-&gt;postmeta}
		WHERE meta_key = &#039;_order_taxes&#039;&quot;
	);

	foreach ( $order_tax_rows as $order_tax_row ) {

		$order_taxes = (array) maybe_unserialize( $order_tax_row-&gt;meta_value );

		if ( ! empty( $order_taxes ) ) {
			foreach ( $order_taxes as $order_tax ) {

				if ( ! isset( $order_tax[&#039;label&#039;] ) || ! isset( $order_tax[&#039;cart_tax&#039;] ) || ! isset( $order_tax[&#039;shipping_tax&#039;] ) ) {
					continue;
				}

				$item_id = wc_add_order_item(
					$order_tax_row-&gt;post_id,
					array(
						&#039;order_item_name&#039; =&gt; $order_tax[&#039;label&#039;],
						&#039;order_item_type&#039; =&gt; &#039;tax&#039;,
					)
				);

				// Add line item meta.
				if ( $item_id ) {
					wc_add_order_item_meta( $item_id, &#039;compound&#039;, absint( isset( $order_tax[&#039;compound&#039;] ) ? $order_tax[&#039;compound&#039;] : 0 ) );
					wc_add_order_item_meta( $item_id, &#039;tax_amount&#039;, wc_clean( $order_tax[&#039;cart_tax&#039;] ) );
					wc_add_order_item_meta( $item_id, &#039;shipping_tax_amount&#039;, wc_clean( $order_tax[&#039;shipping_tax&#039;] ) );
				}

				// Delete from DB (rename).
				$wpdb-&gt;query(
					$wpdb-&gt;prepare(
						&quot;UPDATE {$wpdb-&gt;postmeta}
						SET meta_key = &#039;_order_taxes_old&#039;
						WHERE meta_key = &#039;_order_taxes&#039;
						AND post_id = %d&quot;,
						$order_tax_row-&gt;post_id
					)
				);
			}
		}
	}
}

/**
 * Update image settings for 2.0
 *
 * @return void
 */
function wc_update_200_images() {
	// Grab the pre 2.0 Image options and use to populate the new image options settings,
	// cleaning up afterwards like nice people do.
	foreach ( array( &#039;catalog&#039;, &#039;single&#039;, &#039;thumbnail&#039; ) as $value ) {

		$old_settings = array_filter(
			array(
				&#039;width&#039;  =&gt; get_option( &#039;woocommerce_&#039; . $value . &#039;_image_width&#039; ),
				&#039;height&#039; =&gt; get_option( &#039;woocommerce_&#039; . $value . &#039;_image_height&#039; ),
				&#039;crop&#039;   =&gt; get_option( &#039;woocommerce_&#039; . $value . &#039;_image_crop&#039; ),
			)
		);

		if ( ! empty( $old_settings ) &amp;&amp; update_option( &#039;shop_&#039; . $value . &#039;_image_size&#039;, $old_settings ) ) {

			delete_option( &#039;woocommerce_&#039; . $value . &#039;_image_width&#039; );
			delete_option( &#039;woocommerce_&#039; . $value . &#039;_image_height&#039; );
			delete_option( &#039;woocommerce_&#039; . $value . &#039;_image_crop&#039; );

		}
	}
}

/**
 * Update DB version for 2.0
 *
 * @return void
 */
function wc_update_200_db_version() {
	WC_Install::update_db_version( &#039;2.0.0&#039; );
}

/**
 * Update Brazilian States for 2.0.9
 *
 * @return void
 */
function wc_update_209_brazillian_state() {
	global $wpdb;

	// phpcs:disable WordPress.DB.SlowDBQuery

	// Update brazillian state codes.
	$wpdb-&gt;update(
		$wpdb-&gt;postmeta,
		array(
			&#039;meta_value&#039; =&gt; &#039;BA&#039;,
		),
		array(
			&#039;meta_key&#039;   =&gt; &#039;_billing_state&#039;,
			&#039;meta_value&#039; =&gt; &#039;BH&#039;,
		)
	);
	$wpdb-&gt;update(
		$wpdb-&gt;postmeta,
		array(
			&#039;meta_value&#039; =&gt; &#039;BA&#039;,
		),
		array(
			&#039;meta_key&#039;   =&gt; &#039;_shipping_state&#039;,
			&#039;meta_value&#039; =&gt; &#039;BH&#039;,
		)
	);
	$wpdb-&gt;update(
		$wpdb-&gt;usermeta,
		array(
			&#039;meta_value&#039; =&gt; &#039;BA&#039;,
		),
		array(
			&#039;meta_key&#039;   =&gt; &#039;billing_state&#039;,
			&#039;meta_value&#039; =&gt; &#039;BH&#039;,
		)
	);
	$wpdb-&gt;update(
		$wpdb-&gt;usermeta,
		array(
			&#039;meta_value&#039; =&gt; &#039;BA&#039;,
		),
		array(
			&#039;meta_key&#039;   =&gt; &#039;shipping_state&#039;,
			&#039;meta_value&#039; =&gt; &#039;BH&#039;,
		)
	);

	// phpcs:enable WordPress.DB.SlowDBQuery
}

/**
 * Update DB version for 2.0.9
 *
 * @return void
 */
function wc_update_209_db_version() {
	WC_Install::update_db_version( &#039;2.0.9&#039; );
}

/**
 * Remove pages for 2.1
 *
 * @return void
 */
function wc_update_210_remove_pages() {
	// Pages no longer used.
	wp_trash_post( get_option( &#039;woocommerce_pay_page_id&#039; ) );
	wp_trash_post( get_option( &#039;woocommerce_thanks_page_id&#039; ) );
	wp_trash_post( get_option( &#039;woocommerce_view_order_page_id&#039; ) );
	wp_trash_post( get_option( &#039;woocommerce_change_password_page_id&#039; ) );
	wp_trash_post( get_option( &#039;woocommerce_edit_address_page_id&#039; ) );
	wp_trash_post( get_option( &#039;woocommerce_lost_password_page_id&#039; ) );
}

/**
 * Update file paths to support multiple files for 2.1
 *
 * @return void
 */
function wc_update_210_file_paths() {
	global $wpdb;

	// Upgrade file paths to support multiple file paths + names etc.
	$existing_file_paths = $wpdb-&gt;get_results( &quot;SELECT meta_value, meta_id FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_file_paths&#039; AND meta_value != &#039;&#039;;&quot; );

	if ( $existing_file_paths ) {

		foreach ( $existing_file_paths as $existing_file_path ) {

			$needs_update = false;
			$new_value    = array();
			$value        = maybe_unserialize( trim( $existing_file_path-&gt;meta_value ) );

			if ( $value ) {
				foreach ( $value as $key =&gt; $file ) {
					if ( ! is_array( $file ) ) {
						$needs_update      = true;
						$new_value[ $key ] = array(
							&#039;file&#039; =&gt; $file,
							&#039;name&#039; =&gt; wc_get_filename_from_url( $file ),
						);
					} else {
						$new_value[ $key ] = $file;
					}
				}
				if ( $needs_update ) {
					// phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.serialize_serialize
					$new_value = serialize( $new_value );

					$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;UPDATE {$wpdb-&gt;postmeta} SET meta_key = %s, meta_value = %s WHERE meta_id = %d&quot;, &#039;_downloadable_files&#039;, $new_value, $existing_file_path-&gt;meta_id ) );
				}
			}
		}
	}
}

/**
 * Update DB version for 2.1
 *
 * @return void
 */
function wc_update_210_db_version() {
	WC_Install::update_db_version( &#039;2.1.0&#039; );
}

/**
 * Update shipping options for 2.2
 *
 * @return void
 */
function wc_update_220_shipping() {
	$woocommerce_ship_to_destination = &#039;shipping&#039;;

	if ( get_option( &#039;woocommerce_ship_to_billing_address_only&#039; ) === &#039;yes&#039; ) {
		$woocommerce_ship_to_destination = &#039;billing_only&#039;;
	} elseif ( get_option( &#039;woocommerce_ship_to_billing&#039; ) === &#039;yes&#039; ) {
		$woocommerce_ship_to_destination = &#039;billing&#039;;
	}

	add_option( &#039;woocommerce_ship_to_destination&#039;, $woocommerce_ship_to_destination, &#039;&#039;, &#039;no&#039; );
}

/**
 * Update order statuses for 2.2
 *
 * @return void
 */
function wc_update_220_order_status() {
	global $wpdb;
	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;posts} as posts
		LEFT JOIN {$wpdb-&gt;term_relationships} AS rel ON posts.ID = rel.object_id
		LEFT JOIN {$wpdb-&gt;term_taxonomy} AS tax USING( term_taxonomy_id )
		LEFT JOIN {$wpdb-&gt;terms} AS term USING( term_id )
		SET posts.post_status = &#039;wc-pending&#039;
		WHERE posts.post_type = &#039;shop_order&#039;
		AND posts.post_status = &#039;publish&#039;
		AND tax.taxonomy = &#039;shop_order_status&#039;
		AND	term.slug LIKE &#039;pending%&#039;;&quot;
	);
	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;posts} as posts
		LEFT JOIN {$wpdb-&gt;term_relationships} AS rel ON posts.ID = rel.object_id
		LEFT JOIN {$wpdb-&gt;term_taxonomy} AS tax USING( term_taxonomy_id )
		LEFT JOIN {$wpdb-&gt;terms} AS term USING( term_id )
		SET posts.post_status = &#039;wc-processing&#039;
		WHERE posts.post_type = &#039;shop_order&#039;
		AND posts.post_status = &#039;publish&#039;
		AND tax.taxonomy = &#039;shop_order_status&#039;
		AND	term.slug LIKE &#039;processing%&#039;;&quot;
	);
	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;posts} as posts
		LEFT JOIN {$wpdb-&gt;term_relationships} AS rel ON posts.ID = rel.object_id
		LEFT JOIN {$wpdb-&gt;term_taxonomy} AS tax USING( term_taxonomy_id )
		LEFT JOIN {$wpdb-&gt;terms} AS term USING( term_id )
		SET posts.post_status = &#039;wc-on-hold&#039;
		WHERE posts.post_type = &#039;shop_order&#039;
		AND posts.post_status = &#039;publish&#039;
		AND tax.taxonomy = &#039;shop_order_status&#039;
		AND	term.slug LIKE &#039;on-hold%&#039;;&quot;
	);
	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;posts} as posts
		LEFT JOIN {$wpdb-&gt;term_relationships} AS rel ON posts.ID = rel.object_id
		LEFT JOIN {$wpdb-&gt;term_taxonomy} AS tax USING( term_taxonomy_id )
		LEFT JOIN {$wpdb-&gt;terms} AS term USING( term_id )
		SET posts.post_status = &#039;wc-completed&#039;
		WHERE posts.post_type = &#039;shop_order&#039;
		AND posts.post_status = &#039;publish&#039;
		AND tax.taxonomy = &#039;shop_order_status&#039;
		AND	term.slug LIKE &#039;completed%&#039;;&quot;
	);
	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;posts} as posts
		LEFT JOIN {$wpdb-&gt;term_relationships} AS rel ON posts.ID = rel.object_id
		LEFT JOIN {$wpdb-&gt;term_taxonomy} AS tax USING( term_taxonomy_id )
		LEFT JOIN {$wpdb-&gt;terms} AS term USING( term_id )
		SET posts.post_status = &#039;wc-cancelled&#039;
		WHERE posts.post_type = &#039;shop_order&#039;
		AND posts.post_status = &#039;publish&#039;
		AND tax.taxonomy = &#039;shop_order_status&#039;
		AND	term.slug LIKE &#039;cancelled%&#039;;&quot;
	);
	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;posts} as posts
		LEFT JOIN {$wpdb-&gt;term_relationships} AS rel ON posts.ID = rel.object_id
		LEFT JOIN {$wpdb-&gt;term_taxonomy} AS tax USING( term_taxonomy_id )
		LEFT JOIN {$wpdb-&gt;terms} AS term USING( term_id )
		SET posts.post_status = &#039;wc-refunded&#039;
		WHERE posts.post_type = &#039;shop_order&#039;
		AND posts.post_status = &#039;publish&#039;
		AND tax.taxonomy = &#039;shop_order_status&#039;
		AND	term.slug LIKE &#039;refunded%&#039;;&quot;
	);
	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;posts} as posts
		LEFT JOIN {$wpdb-&gt;term_relationships} AS rel ON posts.ID = rel.object_id
		LEFT JOIN {$wpdb-&gt;term_taxonomy} AS tax USING( term_taxonomy_id )
		LEFT JOIN {$wpdb-&gt;terms} AS term USING( term_id )
		SET posts.post_status = &#039;wc-failed&#039;
		WHERE posts.post_type = &#039;shop_order&#039;
		AND posts.post_status = &#039;publish&#039;
		AND tax.taxonomy = &#039;shop_order_status&#039;
		AND	term.slug LIKE &#039;failed%&#039;;&quot;
	);
}

/**
 * Update variations for 2.2
 *
 * @return void
 */
function wc_update_220_variations() {
	global $wpdb;
	// Update variations which manage stock.
	$update_variations = $wpdb-&gt;get_results(
		&quot;SELECT DISTINCT posts.ID AS variation_id, posts.post_parent AS variation_parent FROM {$wpdb-&gt;posts} as posts
		LEFT OUTER JOIN {$wpdb-&gt;postmeta} AS postmeta ON posts.ID = postmeta.post_id AND postmeta.meta_key = &#039;_stock&#039;
		LEFT OUTER JOIN {$wpdb-&gt;postmeta} as postmeta2 ON posts.ID = postmeta2.post_id AND postmeta2.meta_key = &#039;_manage_stock&#039;
		WHERE posts.post_type = &#039;product_variation&#039;
		AND postmeta.meta_value IS NOT NULL
		AND postmeta.meta_value != &#039;&#039;
		AND postmeta2.meta_value IS NULL&quot;
	);

	foreach ( $update_variations as $variation ) {
		$parent_backorders = get_post_meta( $variation-&gt;variation_parent, &#039;_backorders&#039;, true );
		add_post_meta( $variation-&gt;variation_id, &#039;_manage_stock&#039;, &#039;yes&#039;, true );
		add_post_meta( $variation-&gt;variation_id, &#039;_backorders&#039;, $parent_backorders ? $parent_backorders : &#039;no&#039;, true );
	}
}

/**
 * Update attributes for 2.2
 *
 * @return void
 */
function wc_update_220_attributes() {
	global $wpdb;
	// Update taxonomy names with correct sanitized names.
	$attribute_taxonomies = $wpdb-&gt;get_results( &#039;SELECT attribute_name, attribute_id FROM &#039; . $wpdb-&gt;prefix . &#039;woocommerce_attribute_taxonomies&#039; );

	foreach ( $attribute_taxonomies as $attribute_taxonomy ) {
		$sanitized_attribute_name = wc_sanitize_taxonomy_name( $attribute_taxonomy-&gt;attribute_name );
		if ( $sanitized_attribute_name !== $attribute_taxonomy-&gt;attribute_name ) {
			if ( ! $wpdb-&gt;get_var( $wpdb-&gt;prepare( &quot;SELECT 1=1 FROM {$wpdb-&gt;prefix}woocommerce_attribute_taxonomies WHERE attribute_name = %s;&quot;, $sanitized_attribute_name ) ) ) {
				// Update attribute.
				$wpdb-&gt;update(
					&quot;{$wpdb-&gt;prefix}woocommerce_attribute_taxonomies&quot;,
					array(
						&#039;attribute_name&#039; =&gt; $sanitized_attribute_name,
					),
					array(
						&#039;attribute_id&#039; =&gt; $attribute_taxonomy-&gt;attribute_id,
					)
				);

				// Update terms.
				$wpdb-&gt;update(
					$wpdb-&gt;term_taxonomy,
					array( &#039;taxonomy&#039; =&gt; wc_attribute_taxonomy_name( $sanitized_attribute_name ) ),
					array( &#039;taxonomy&#039; =&gt; &#039;pa_&#039; . $attribute_taxonomy-&gt;attribute_name )
				);
			}
		}
	}

	delete_transient( &#039;wc_attribute_taxonomies&#039; );
	WC_Cache_Helper::invalidate_cache_group( &#039;woocommerce-attributes&#039; );
}

/**
 * Update DB version for 2.2
 *
 * @return void
 */
function wc_update_220_db_version() {
	WC_Install::update_db_version( &#039;2.2.0&#039; );
}

/**
 * Update options for 2.3
 *
 * @return void
 */
function wc_update_230_options() {
	// _money_spent and _order_count may be out of sync - clear them
	delete_metadata( &#039;user&#039;, 0, &#039;_money_spent&#039;, &#039;&#039;, true );
	delete_metadata( &#039;user&#039;, 0, &#039;_order_count&#039;, &#039;&#039;, true );
	delete_metadata( &#039;user&#039;, 0, &#039;_last_order&#039;, &#039;&#039;, true );

	// To prevent taxes being hidden when using a default &#039;no address&#039; in a store with tax inc prices, set the woocommerce_default_customer_address to use the store base address by default.
	if ( &#039;&#039; === get_option( &#039;woocommerce_default_customer_address&#039;, false ) &amp;&amp; wc_prices_include_tax() ) {
		update_option( &#039;woocommerce_default_customer_address&#039;, &#039;base&#039; );
	}
}

/**
 * Update DB version for 2.3
 *
 * @return void
 */
function wc_update_230_db_version() {
	WC_Install::update_db_version( &#039;2.3.0&#039; );
}

/**
 * Update calc discount options for 2.4
 *
 * @return void
 */
function wc_update_240_options() {
	/**
	 * Coupon discount calculations.
	 * Maintain the old coupon logic for upgrades.
	 */
	update_option( &#039;woocommerce_calc_discounts_sequentially&#039;, &#039;yes&#039; );
}

/**
 * Update shipping methods for 2.4
 *
 * @return void
 */
function wc_update_240_shipping_methods() {
	/**
	 * Flat Rate Shipping.
	 * Update legacy options to new math based options.
	 */
	$shipping_methods = array(
		&#039;woocommerce_flat_rates&#039;                        =&gt; new WC_Shipping_Legacy_Flat_Rate(),
		&#039;woocommerce_international_delivery_flat_rates&#039; =&gt; new WC_Shipping_Legacy_International_Delivery(),
	);
	foreach ( $shipping_methods as $flat_rate_option_key =&gt; $shipping_method ) {
		// Stop this running more than once if routine is repeated.
		if ( version_compare( $shipping_method-&gt;get_option( &#039;version&#039;, 0 ), &#039;2.4.0&#039;, &#039;&lt;&#039; ) ) {
			$shipping_classes  = WC()-&gt;shipping()-&gt;get_shipping_classes();
			$has_classes       = count( $shipping_classes ) &gt; 0;
			$cost_key          = $has_classes ? &#039;no_class_cost&#039; : &#039;cost&#039;;
			$min_fee           = $shipping_method-&gt;get_option( &#039;minimum_fee&#039; );
			$math_cost_strings = array(
				&#039;cost&#039;          =&gt; array(),
				&#039;no_class_cost&#039; =&gt; array(),
			);

			$math_cost_strings[ $cost_key ][] = $shipping_method-&gt;get_option( &#039;cost&#039; );
			$fee                              = $shipping_method-&gt;get_option( &#039;fee&#039; );

			if ( $fee ) {
				$math_cost_strings[ $cost_key ][] = strstr( $fee, &#039;%&#039; ) ? &#039;[fee percent=&quot;&#039; . str_replace( &#039;%&#039;, &#039;&#039;, $fee ) . &#039;&quot; min=&quot;&#039; . esc_attr( $min_fee ) . &#039;&quot;]&#039; : $fee;
			}

			foreach ( $shipping_classes as $shipping_class ) {
				$rate_key                       = &#039;class_cost_&#039; . $shipping_class-&gt;slug;
				$math_cost_strings[ $rate_key ] = $math_cost_strings[&#039;no_class_cost&#039;];
			}

			$flat_rates = array_filter( (array) get_option( $flat_rate_option_key, array() ) );

			if ( $flat_rates ) {
				foreach ( $flat_rates as $shipping_class =&gt; $rate ) {
					$rate_key = &#039;class_cost_&#039; . $shipping_class;
					if ( $rate[&#039;cost&#039;] || $rate[&#039;fee&#039;] ) {
						$math_cost_strings[ $rate_key ][] = $rate[&#039;cost&#039;];
						$math_cost_strings[ $rate_key ][] = strstr( $rate[&#039;fee&#039;], &#039;%&#039; ) ? &#039;[fee percent=&quot;&#039; . str_replace( &#039;%&#039;, &#039;&#039;, $rate[&#039;fee&#039;] ) . &#039;&quot; min=&quot;&#039; . esc_attr( $min_fee ) . &#039;&quot;]&#039; : $rate[&#039;fee&#039;];
					}
				}
			}

			if ( &#039;item&#039; === $shipping_method-&gt;type ) {
				foreach ( $math_cost_strings as $key =&gt; $math_cost_string ) {
					$math_cost_strings[ $key ] = array_filter( array_map( &#039;trim&#039;, $math_cost_strings[ $key ] ) );
					if ( ! empty( $math_cost_strings[ $key ] ) ) {
						$last_key                                = max( 0, count( $math_cost_strings[ $key ] ) - 1 );
						$math_cost_strings[ $key ][0]            = &#039;( &#039; . $math_cost_strings[ $key ][0];
						$math_cost_strings[ $key ][ $last_key ] .= &#039; ) * [qty]&#039;;
					}
				}
			}

			$math_cost_strings[&#039;cost&#039;][] = $shipping_method-&gt;get_option( &#039;cost_per_order&#039; );

			// Save settings.
			foreach ( $math_cost_strings as $option_id =&gt; $math_cost_string ) {
				$shipping_method-&gt;settings[ $option_id ] = implode( &#039; + &#039;, array_filter( $math_cost_string ) );
			}

			$shipping_method-&gt;settings[&#039;version&#039;] = &#039;2.4.0&#039;;
			$shipping_method-&gt;settings[&#039;type&#039;]    = &#039;item&#039; === $shipping_method-&gt;settings[&#039;type&#039;] ? &#039;class&#039; : $shipping_method-&gt;settings[&#039;type&#039;];

			update_option( $shipping_method-&gt;plugin_id . $shipping_method-&gt;id . &#039;_settings&#039;, $shipping_method-&gt;settings );
		}
	}
}

/**
 * Update API keys for 2.4
 *
 * @return void
 */
function wc_update_240_api_keys() {
	global $wpdb;
	/**
	 * Update the old user API keys to the new Apps keys.
	 */
	$api_users = $wpdb-&gt;get_results( &quot;SELECT user_id FROM $wpdb-&gt;usermeta WHERE meta_key = &#039;woocommerce_api_consumer_key&#039;&quot; );
	$apps_keys = array();

	// Get user data.
	foreach ( $api_users as $_user ) {
		$user        = get_userdata( $_user-&gt;user_id );
		$apps_keys[] = array(
			&#039;user_id&#039;         =&gt; $user-&gt;ID,
			&#039;permissions&#039;     =&gt; $user-&gt;woocommerce_api_key_permissions,
			&#039;consumer_key&#039;    =&gt; wc_api_hash( $user-&gt;woocommerce_api_consumer_key ),
			&#039;consumer_secret&#039; =&gt; $user-&gt;woocommerce_api_consumer_secret,
			&#039;truncated_key&#039;   =&gt; substr( $user-&gt;woocommerce_api_consumer_secret, -7 ),
		);
	}

	if ( ! empty( $apps_keys ) ) {
		// Create new apps.
		foreach ( $apps_keys as $app ) {
			$wpdb-&gt;insert(
				$wpdb-&gt;prefix . &#039;woocommerce_api_keys&#039;,
				$app,
				array(
					&#039;%d&#039;,
					&#039;%s&#039;,
					&#039;%s&#039;,
					&#039;%s&#039;,
					&#039;%s&#039;,
				)
			);
		}

		// Delete old user keys from usermeta.
		foreach ( $api_users as $_user ) {
			$user_id = intval( $_user-&gt;user_id );
			delete_user_meta( $user_id, &#039;woocommerce_api_consumer_key&#039; );
			delete_user_meta( $user_id, &#039;woocommerce_api_consumer_secret&#039; );
			delete_user_meta( $user_id, &#039;woocommerce_api_key_permissions&#039; );
		}
	}
}

/**
 * Update webhooks for 2.4
 *
 * @return void
 */
function wc_update_240_webhooks() {
	// phpcs:disable WordPress.DB.SlowDBQuery

	/**
	 * Webhooks.
	 * Make sure order.update webhooks get the woocommerce_order_edit_status hook.
	 */
	$order_update_webhooks = get_posts(
		array(
			&#039;posts_per_page&#039; =&gt; -1,
			&#039;post_type&#039;      =&gt; &#039;shop_webhook&#039;,
			&#039;meta_key&#039;       =&gt; &#039;_topic&#039;,
			&#039;meta_value&#039;     =&gt; &#039;order.updated&#039;,
		)
	);
	foreach ( $order_update_webhooks as $order_update_webhook ) {
		$webhook = new WC_Webhook( $order_update_webhook-&gt;ID );
		$webhook-&gt;set_topic( &#039;order.updated&#039; );
	}

	// phpcs:enable WordPress.DB.SlowDBQuery
}

/**
 * Update refunds for 2.4
 *
 * @return void
 */
function wc_update_240_refunds() {
	global $wpdb;
	/**
	 * Refunds for full refunded orders.
	 * Update fully refunded orders to ensure they have a refund line item so reports add up.
	 */
	$refunded_orders = get_posts(
		array(
			&#039;posts_per_page&#039; =&gt; -1,
			&#039;post_type&#039;      =&gt; &#039;shop_order&#039;,
			&#039;post_status&#039;    =&gt; array( &#039;wc-refunded&#039; ),
		)
	);

	// Ensure emails are disabled during this update routine.
	remove_all_actions( &#039;woocommerce_order_status_refunded_notification&#039; );
	remove_all_actions( &#039;woocommerce_order_partially_refunded_notification&#039; );
	remove_action( &#039;woocommerce_order_status_refunded&#039;, array( &#039;WC_Emails&#039;, &#039;send_transactional_email&#039; ) );
	remove_action( &#039;woocommerce_order_partially_refunded&#039;, array( &#039;WC_Emails&#039;, &#039;send_transactional_email&#039; ) );

	foreach ( $refunded_orders as $refunded_order ) {
		$order_total    = get_post_meta( $refunded_order-&gt;ID, &#039;_order_total&#039;, true );
		$refunded_total = $wpdb-&gt;get_var(
			$wpdb-&gt;prepare(
				&quot;SELECT SUM( postmeta.meta_value )
				FROM $wpdb-&gt;postmeta AS postmeta
				INNER JOIN $wpdb-&gt;posts AS posts ON ( posts.post_type = &#039;shop_order_refund&#039; AND posts.post_parent = %d )
				WHERE postmeta.meta_key = &#039;_refund_amount&#039;
				AND postmeta.post_id = posts.ID&quot;,
				$refunded_order-&gt;ID
			)
		);

		if ( $order_total &gt; $refunded_total ) {
			wc_create_refund(
				array(
					&#039;amount&#039;     =&gt; $order_total - $refunded_total,
					&#039;reason&#039;     =&gt; __( &#039;Order fully refunded&#039;, &#039;woocommerce&#039; ),
					&#039;order_id&#039;   =&gt; $refunded_order-&gt;ID,
					&#039;line_items&#039; =&gt; array(),
					&#039;date&#039;       =&gt; $refunded_order-&gt;post_modified,
				)
			);
		}
	}

	wc_delete_shop_order_transients();
}

/**
 * Update DB version for 2.4
 *
 * @return void
 */
function wc_update_240_db_version() {
	WC_Install::update_db_version( &#039;2.4.0&#039; );
}

/**
 * Update variations for 2.4.1
 *
 * @return void
 */
function wc_update_241_variations() {
	global $wpdb;

	// Select variations that don&#039;t have any _stock_status implemented on WooCommerce 2.2.
	$update_variations = $wpdb-&gt;get_results(
		&quot;SELECT DISTINCT posts.ID AS variation_id, posts.post_parent AS variation_parent
		FROM {$wpdb-&gt;posts} as posts
		LEFT OUTER JOIN {$wpdb-&gt;postmeta} AS postmeta ON posts.ID = postmeta.post_id AND postmeta.meta_key = &#039;_stock_status&#039;
		WHERE posts.post_type = &#039;product_variation&#039;
		AND postmeta.meta_value IS NULL&quot;
	);

	foreach ( $update_variations as $variation ) {
		// Get the parent _stock_status.
		$parent_stock_status = get_post_meta( $variation-&gt;variation_parent, &#039;_stock_status&#039;, true );

		// Set the _stock_status.
		add_post_meta( $variation-&gt;variation_id, &#039;_stock_status&#039;, $parent_stock_status ? $parent_stock_status : &#039;instock&#039;, true );

		// Delete old product children array.
		delete_transient( &#039;wc_product_children_&#039; . $variation-&gt;variation_parent );
	}

	// Invalidate old transients such as wc_var_price.
	WC_Cache_Helper::get_transient_version( &#039;product&#039;, true );
}

/**
 * Update DB version for 2.4.1
 *
 * @return void
 */
function wc_update_241_db_version() {
	WC_Install::update_db_version( &#039;2.4.1&#039; );
}

/**
 * Update currency settings for 2.5
 *
 * @return void
 */
function wc_update_250_currency() {
	global $wpdb;
	// Fix currency settings for LAK currency.
	$current_currency = get_option( &#039;woocommerce_currency&#039; );

	if ( &#039;KIP&#039; === $current_currency ) {
		update_option( &#039;woocommerce_currency&#039;, &#039;LAK&#039; );
	}

	// phpcs:disable WordPress.DB.SlowDBQuery

	// Update LAK currency code.
	$wpdb-&gt;update(
		$wpdb-&gt;postmeta,
		array(
			&#039;meta_value&#039; =&gt; &#039;LAK&#039;,
		),
		array(
			&#039;meta_key&#039;   =&gt; &#039;_order_currency&#039;,
			&#039;meta_value&#039; =&gt; &#039;KIP&#039;,
		)
	);

	// phpcs:enable WordPress.DB.SlowDBQuery
}

/**
 * Update DB version for 2.5
 *
 * @return void
 */
function wc_update_250_db_version() {
	WC_Install::update_db_version( &#039;2.5.0&#039; );
}

/**
 * Update ship to countries options for 2.6
 *
 * @return void
 */
function wc_update_260_options() {
	// woocommerce_calc_shipping option has been removed in 2.6.
	if ( &#039;no&#039; === get_option( &#039;woocommerce_calc_shipping&#039; ) ) {
		update_option( &#039;woocommerce_ship_to_countries&#039;, &#039;disabled&#039; );
	}

	WC_Admin_Notices::add_notice( &#039;legacy_shipping&#039; );
}

/**
 * Update term meta for 2.6
 *
 * @return void
 */
function wc_update_260_termmeta() {
	global $wpdb;
	/**
	 * Migrate term meta to WordPress tables.
	 */
	if ( get_option( &#039;db_version&#039; ) &gt;= 34370 &amp;&amp; $wpdb-&gt;get_var( &quot;SHOW TABLES LIKE &#039;{$wpdb-&gt;prefix}woocommerce_termmeta&#039;;&quot; ) ) {
		if ( $wpdb-&gt;query( &quot;INSERT INTO {$wpdb-&gt;termmeta} ( term_id, meta_key, meta_value ) SELECT woocommerce_term_id, meta_key, meta_value FROM {$wpdb-&gt;prefix}woocommerce_termmeta;&quot; ) ) {
			$wpdb-&gt;query( &quot;DROP TABLE IF EXISTS {$wpdb-&gt;prefix}woocommerce_termmeta&quot; );
			wp_cache_flush();
		}
	}
}

/**
 * Update zones for 2.6
 *
 * @return void
 */
function wc_update_260_zones() {
	global $wpdb;
	/**
	 * Old (table rate) shipping zones to new core shipping zones migration.
	 * zone_enabled and zone_type are no longer used, but it&#039;s safe to leave them be.
	 */
	if ( $wpdb-&gt;get_var( &quot;SHOW COLUMNS FROM `{$wpdb-&gt;prefix}woocommerce_shipping_zones` LIKE &#039;zone_enabled&#039;;&quot; ) ) {
		$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}woocommerce_shipping_zones CHANGE `zone_type` `zone_type` VARCHAR(40) NOT NULL DEFAULT &#039;&#039;;&quot; );
		$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}woocommerce_shipping_zones CHANGE `zone_enabled` `zone_enabled` INT(1) NOT NULL DEFAULT 1;&quot; );
	}
}

/**
 * Update zone methods for 2.6
 *
 * @return void
 */
function wc_update_260_zone_methods() {
	global $wpdb;

	/**
	 * Shipping zones in WC 2.6.0 use a table named woocommerce_shipping_zone_methods.
	 * Migrate the old data out of woocommerce_shipping_zone_shipping_methods into the new table and port over any known options (used by table rates and flat rate boxes).
	 */
	if ( $wpdb-&gt;get_var( &quot;SHOW TABLES LIKE &#039;{$wpdb-&gt;prefix}woocommerce_shipping_zone_shipping_methods&#039;;&quot; ) ) {
		$old_methods = $wpdb-&gt;get_results( &quot;SELECT zone_id, shipping_method_type, shipping_method_order, shipping_method_id FROM {$wpdb-&gt;prefix}woocommerce_shipping_zone_shipping_methods;&quot; );

		if ( $old_methods ) {
			$max_new_id = $wpdb-&gt;get_var( &quot;SELECT MAX(instance_id) FROM {$wpdb-&gt;prefix}woocommerce_shipping_zone_methods&quot; );
			$max_old_id = $wpdb-&gt;get_var( &quot;SELECT MAX(shipping_method_id) FROM {$wpdb-&gt;prefix}woocommerce_shipping_zone_shipping_methods&quot; );

			// Avoid ID conflicts.
			$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;ALTER TABLE {$wpdb-&gt;prefix}woocommerce_shipping_zone_methods AUTO_INCREMENT = %d;&quot;, max( $max_new_id, $max_old_id ) + 1 ) );

			// Store changes.
			$changes = array();

			// Move data.
			foreach ( $old_methods as $old_method ) {
				$wpdb-&gt;insert(
					$wpdb-&gt;prefix . &#039;woocommerce_shipping_zone_methods&#039;,
					array(
						&#039;zone_id&#039;      =&gt; $old_method-&gt;zone_id,
						&#039;method_id&#039;    =&gt; $old_method-&gt;shipping_method_type,
						&#039;method_order&#039; =&gt; $old_method-&gt;shipping_method_order,
					)
				);

				$new_instance_id = $wpdb-&gt;insert_id;

				// Move main settings.
				$older_settings_key = &#039;woocommerce_&#039; . $old_method-&gt;shipping_method_type . &#039;-&#039; . $old_method-&gt;shipping_method_id . &#039;_settings&#039;;
				$old_settings_key   = &#039;woocommerce_&#039; . $old_method-&gt;shipping_method_type . &#039;_&#039; . $old_method-&gt;shipping_method_id . &#039;_settings&#039;;
				add_option( &#039;woocommerce_&#039; . $old_method-&gt;shipping_method_type . &#039;_&#039; . $new_instance_id . &#039;_settings&#039;, get_option( $old_settings_key, get_option( $older_settings_key ) ) );

				// Handling for table rate and flat rate box shipping.
				if ( &#039;table_rate&#039; === $old_method-&gt;shipping_method_type ) {
					// Move priority settings.
					add_option( &#039;woocommerce_table_rate_default_priority_&#039; . $new_instance_id, get_option( &#039;woocommerce_table_rate_default_priority_&#039; . $old_method-&gt;shipping_method_id ) );
					add_option( &#039;woocommerce_table_rate_priorities_&#039; . $new_instance_id, get_option( &#039;woocommerce_table_rate_priorities_&#039; . $old_method-&gt;shipping_method_id ) );

					// Move rates.
					$wpdb-&gt;update(
						$wpdb-&gt;prefix . &#039;woocommerce_shipping_table_rates&#039;,
						array(
							&#039;shipping_method_id&#039; =&gt; $new_instance_id,
						),
						array(
							&#039;shipping_method_id&#039; =&gt; $old_method-&gt;shipping_method_id,
						)
					);
				} elseif ( &#039;flat_rate_boxes&#039; === $old_method-&gt;shipping_method_type ) {
					$wpdb-&gt;update(
						$wpdb-&gt;prefix . &#039;woocommerce_shipping_flat_rate_boxes&#039;,
						array(
							&#039;shipping_method_id&#039; =&gt; $new_instance_id,
						),
						array(
							&#039;shipping_method_id&#039; =&gt; $old_method-&gt;shipping_method_id,
						)
					);
				}

				$changes[ $old_method-&gt;shipping_method_id ] = $new_instance_id;
			}

			// $changes contains keys (old method ids) and values (new instance ids) if extra processing is needed in plugins.
			// Store this to an option so extensions can pick it up later, then fire an action.
			update_option( &#039;woocommerce_updated_instance_ids&#039;, $changes );
			do_action( &#039;woocommerce_updated_instance_ids&#039;, $changes );
		}
	}

	// Change ranges used to ...
	$wpdb-&gt;query( &quot;UPDATE {$wpdb-&gt;prefix}woocommerce_shipping_zone_locations SET location_code = REPLACE( location_code, &#039;-&#039;, &#039;...&#039; );&quot; );
}

/**
 * Update refunds for 2.6
 *
 * @return void
 */
function wc_update_260_refunds() {
	global $wpdb;
	/**
	 * Refund item qty should be negative.
	 */
	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;prefix}woocommerce_order_itemmeta as item_meta
		LEFT JOIN {$wpdb-&gt;prefix}woocommerce_order_items as items ON item_meta.order_item_id = items.order_item_id
		LEFT JOIN {$wpdb-&gt;posts} as posts ON items.order_id = posts.ID
		SET item_meta.meta_value = item_meta.meta_value * -1
		WHERE item_meta.meta_value &gt; 0 AND item_meta.meta_key = &#039;_qty&#039; AND posts.post_type = &#039;shop_order_refund&#039;&quot;
	);
}

/**
 * Update DB version for 2.6
 *
 * @return void
 */
function wc_update_260_db_version() {
	WC_Install::update_db_version( &#039;2.6.0&#039; );
}

/**
 * Update webhooks for 3.0
 *
 * @return void
 */
function wc_update_300_webhooks() {
	// phpcs:disable WordPress.DB.SlowDBQuery

	/**
	 * Make sure product.update webhooks get the woocommerce_product_quick_edit_save
	 * and woocommerce_product_bulk_edit_save hooks.
	 */
	$product_update_webhooks = get_posts(
		array(
			&#039;posts_per_page&#039; =&gt; -1,
			&#039;post_type&#039;      =&gt; &#039;shop_webhook&#039;,
			&#039;meta_key&#039;       =&gt; &#039;_topic&#039;,
			&#039;meta_value&#039;     =&gt; &#039;product.updated&#039;,
		)
	);
	foreach ( $product_update_webhooks as $product_update_webhook ) {
		$webhook = new WC_Webhook( $product_update_webhook-&gt;ID );
		$webhook-&gt;set_topic( &#039;product.updated&#039; );
	}

	// phpcs:enable WordPress.DB.SlowDBQuery
}

/**
 * Add an index to the field comment_type to improve the response time of the query
 * used by WC_Comments::wp_count_comments() to get the number of comments by type.
 */
function wc_update_300_comment_type_index() {
	global $wpdb;

	$index_exists = $wpdb-&gt;get_row( &quot;SHOW INDEX FROM {$wpdb-&gt;comments} WHERE column_name = &#039;comment_type&#039; and key_name = &#039;woo_idx_comment_type&#039;&quot; );

	if ( is_null( $index_exists ) ) {
		// Add an index to the field comment_type to improve the response time of the query
		// used by WC_Comments::wp_count_comments() to get the number of comments by type.
		$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;comments} ADD INDEX woo_idx_comment_type (comment_type)&quot; );
	}
}

/**
 * Update grouped products for 3.0
 *
 * @return void
 */
function wc_update_300_grouped_products() {
	global $wpdb;
	$parents = $wpdb-&gt;get_col( &quot;SELECT DISTINCT( post_parent ) FROM {$wpdb-&gt;posts} WHERE post_parent &gt; 0 AND post_type = &#039;product&#039;;&quot; );
	foreach ( $parents as $parent_id ) {
		$parent = wc_get_product( $parent_id );
		if ( $parent &amp;&amp; $parent-&gt;is_type( &#039;grouped&#039; ) ) {
			$children_ids = get_posts(
				array(
					&#039;post_parent&#039;    =&gt; $parent_id,
					&#039;posts_per_page&#039; =&gt; -1,
					&#039;post_type&#039;      =&gt; &#039;product&#039;,
					&#039;fields&#039;         =&gt; &#039;ids&#039;,
				)
			);
			update_post_meta( $parent_id, &#039;_children&#039;, $children_ids );

			// Update children to remove the parent.
			$wpdb-&gt;update(
				$wpdb-&gt;posts,
				array(
					&#039;post_parent&#039; =&gt; 0,
				),
				array(
					&#039;post_parent&#039; =&gt; $parent_id,
				)
			);
		}
	}
}

/**
 * Update shipping tax classes for 3.0
 *
 * @return void
 */
function wc_update_300_settings() {
	$woocommerce_shipping_tax_class = get_option( &#039;woocommerce_shipping_tax_class&#039; );
	if ( &#039;&#039; === $woocommerce_shipping_tax_class ) {
		update_option( &#039;woocommerce_shipping_tax_class&#039;, &#039;inherit&#039; );
	} elseif ( &#039;standard&#039; === $woocommerce_shipping_tax_class ) {
		update_option( &#039;woocommerce_shipping_tax_class&#039;, &#039;&#039; );
	}
}

/**
 * Convert meta values into term for product visibility.
 */
function wc_update_300_product_visibility() {
	global $wpdb;

	WC_Install::create_terms();

	$featured_term = get_term_by( &#039;name&#039;, &#039;featured&#039;, &#039;product_visibility&#039; );

	if ( $featured_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_featured&#039; AND meta_value = &#039;yes&#039;;&quot;, $featured_term-&gt;term_taxonomy_id ) );
	}

	$exclude_search_term = get_term_by( &#039;name&#039;, &#039;exclude-from-search&#039;, &#039;product_visibility&#039; );

	if ( $exclude_search_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_visibility&#039; AND meta_value IN (&#039;hidden&#039;, &#039;catalog&#039;);&quot;, $exclude_search_term-&gt;term_taxonomy_id ) );
	}

	$exclude_catalog_term = get_term_by( &#039;name&#039;, &#039;exclude-from-catalog&#039;, &#039;product_visibility&#039; );

	if ( $exclude_catalog_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_visibility&#039; AND meta_value IN (&#039;hidden&#039;, &#039;search&#039;);&quot;, $exclude_catalog_term-&gt;term_taxonomy_id ) );
	}

	$outofstock_term = get_term_by( &#039;name&#039;, &#039;outofstock&#039;, &#039;product_visibility&#039; );

	if ( $outofstock_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_stock_status&#039; AND meta_value = &#039;outofstock&#039;;&quot;, $outofstock_term-&gt;term_taxonomy_id ) );
	}

	$rating_term = get_term_by( &#039;name&#039;, &#039;rated-1&#039;, &#039;product_visibility&#039; );

	if ( $rating_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_wc_average_rating&#039; AND ROUND( meta_value ) = 1;&quot;, $rating_term-&gt;term_taxonomy_id ) );
	}

	$rating_term = get_term_by( &#039;name&#039;, &#039;rated-2&#039;, &#039;product_visibility&#039; );

	if ( $rating_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_wc_average_rating&#039; AND ROUND( meta_value ) = 2;&quot;, $rating_term-&gt;term_taxonomy_id ) );
	}

	$rating_term = get_term_by( &#039;name&#039;, &#039;rated-3&#039;, &#039;product_visibility&#039; );

	if ( $rating_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_wc_average_rating&#039; AND ROUND( meta_value ) = 3;&quot;, $rating_term-&gt;term_taxonomy_id ) );
	}

	$rating_term = get_term_by( &#039;name&#039;, &#039;rated-4&#039;, &#039;product_visibility&#039; );

	if ( $rating_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_wc_average_rating&#039; AND ROUND( meta_value ) = 4;&quot;, $rating_term-&gt;term_taxonomy_id ) );
	}

	$rating_term = get_term_by( &#039;name&#039;, &#039;rated-5&#039;, &#039;product_visibility&#039; );

	if ( $rating_term ) {
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;INSERT IGNORE INTO {$wpdb-&gt;term_relationships} SELECT post_id, %d, 0 FROM {$wpdb-&gt;postmeta} WHERE meta_key = &#039;_wc_average_rating&#039; AND ROUND( meta_value ) = 5;&quot;, $rating_term-&gt;term_taxonomy_id ) );
	}
}

/**
 * Update DB Version.
 */
function wc_update_300_db_version() {
	WC_Install::update_db_version( &#039;3.0.0&#039; );
}

/**
 * Add an index to the downloadable product permissions table to improve performance of update_user_by_order_id.
 */
function wc_update_310_downloadable_products() {
	global $wpdb;

	$index_exists = $wpdb-&gt;get_row( &quot;SHOW INDEX FROM {$wpdb-&gt;prefix}woocommerce_downloadable_product_permissions WHERE column_name = &#039;order_id&#039; and key_name = &#039;order_id&#039;&quot; );

	if ( is_null( $index_exists ) ) {
		$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}woocommerce_downloadable_product_permissions ADD INDEX order_id (order_id)&quot; );
	}
}

/**
 * Find old order notes and ensure they have the correct type for exclusion.
 */
function wc_update_310_old_comments() {
	global $wpdb;

	$wpdb-&gt;query( &quot;UPDATE $wpdb-&gt;comments comments LEFT JOIN $wpdb-&gt;posts as posts ON comments.comment_post_ID = posts.ID SET comment_type = &#039;order_note&#039; WHERE posts.post_type = &#039;shop_order&#039; AND comment_type = &#039;&#039;;&quot; );
}

/**
 * Update DB Version.
 */
function wc_update_310_db_version() {
	WC_Install::update_db_version( &#039;3.1.0&#039; );
}

/**
 * Update shop_manager capabilities.
 */
function wc_update_312_shop_manager_capabilities() {
	$role = get_role( &#039;shop_manager&#039; );
	$role-&gt;remove_cap( &#039;unfiltered_html&#039; );
}

/**
 * Update DB Version.
 */
function wc_update_312_db_version() {
	WC_Install::update_db_version( &#039;3.1.2&#039; );
}

/**
 * Update state codes for Mexico.
 */
function wc_update_320_mexican_states() {
	global $wpdb;

	$mx_states = array(
		&#039;Distrito Federal&#039;    =&gt; &#039;CMX&#039;,
		&#039;Jalisco&#039;             =&gt; &#039;JAL&#039;,
		&#039;Nuevo Leon&#039;          =&gt; &#039;NLE&#039;,
		&#039;Aguascalientes&#039;      =&gt; &#039;AGS&#039;,
		&#039;Baja California&#039;     =&gt; &#039;BCN&#039;,
		&#039;Baja California Sur&#039; =&gt; &#039;BCS&#039;,
		&#039;Campeche&#039;            =&gt; &#039;CAM&#039;,
		&#039;Chiapas&#039;             =&gt; &#039;CHP&#039;,
		&#039;Chihuahua&#039;           =&gt; &#039;CHH&#039;,
		&#039;Coahuila&#039;            =&gt; &#039;COA&#039;,
		&#039;Colima&#039;              =&gt; &#039;COL&#039;,
		&#039;Durango&#039;             =&gt; &#039;DGO&#039;,
		&#039;Guanajuato&#039;          =&gt; &#039;GTO&#039;,
		&#039;Guerrero&#039;            =&gt; &#039;GRO&#039;,
		&#039;Hidalgo&#039;             =&gt; &#039;HGO&#039;,
		&#039;Estado de Mexico&#039;    =&gt; &#039;MEX&#039;,
		&#039;Michoacan&#039;           =&gt; &#039;MIC&#039;,
		&#039;Morelos&#039;             =&gt; &#039;MOR&#039;,
		&#039;Nayarit&#039;             =&gt; &#039;NAY&#039;,
		&#039;Oaxaca&#039;              =&gt; &#039;OAX&#039;,
		&#039;Puebla&#039;              =&gt; &#039;PUE&#039;,
		&#039;Queretaro&#039;           =&gt; &#039;QRO&#039;,
		&#039;Quintana Roo&#039;        =&gt; &#039;ROO&#039;,
		&#039;San Luis Potosi&#039;     =&gt; &#039;SLP&#039;,
		&#039;Sinaloa&#039;             =&gt; &#039;SIN&#039;,
		&#039;Sonora&#039;              =&gt; &#039;SON&#039;,
		&#039;Tabasco&#039;             =&gt; &#039;TAB&#039;,
		&#039;Tamaulipas&#039;          =&gt; &#039;TMP&#039;,
		&#039;Tlaxcala&#039;            =&gt; &#039;TLA&#039;,
		&#039;Veracruz&#039;            =&gt; &#039;VER&#039;,
		&#039;Yucatan&#039;             =&gt; &#039;YUC&#039;,
		&#039;Zacatecas&#039;           =&gt; &#039;ZAC&#039;,
	);

	foreach ( $mx_states as $old =&gt; $new ) {
		$wpdb-&gt;query(
			$wpdb-&gt;prepare(
				&quot;UPDATE $wpdb-&gt;postmeta
				SET meta_value = %s
				WHERE meta_key IN ( &#039;_billing_state&#039;, &#039;_shipping_state&#039; )
				AND meta_value = %s&quot;,
				$new,
				$old
			)
		);
		$wpdb-&gt;update(
			&quot;{$wpdb-&gt;prefix}woocommerce_shipping_zone_locations&quot;,
			array(
				&#039;location_code&#039; =&gt; &#039;MX:&#039; . $new,
			),
			array(
				&#039;location_code&#039; =&gt; &#039;MX:&#039; . $old,
			)
		);
		$wpdb-&gt;update(
			&quot;{$wpdb-&gt;prefix}woocommerce_tax_rates&quot;,
			array(
				&#039;tax_rate_state&#039; =&gt; strtoupper( $new ),
			),
			array(
				&#039;tax_rate_state&#039; =&gt; strtoupper( $old ),
			)
		);
	}
}

/**
 * Update DB Version.
 */
function wc_update_320_db_version() {
	WC_Install::update_db_version( &#039;3.2.0&#039; );
}

/**
 * Update image settings to use new aspect ratios and widths.
 */
function wc_update_330_image_options() {
	$old_thumbnail_size = get_option( &#039;shop_catalog_image_size&#039;, array() );
	$old_single_size    = get_option( &#039;shop_single_image_size&#039;, array() );

	if ( ! empty( $old_thumbnail_size[&#039;width&#039;] ) ) {
		$width     = absint( $old_thumbnail_size[&#039;width&#039;] );
		$height    = absint( $old_thumbnail_size[&#039;height&#039;] );
		$hard_crop = ! empty( $old_thumbnail_size[&#039;crop&#039;] );

		if ( ! $width ) {
			$width = 300;
		}

		if ( ! $height ) {
			$height = $width;
		}

		update_option( &#039;woocommerce_thumbnail_image_width&#039;, $width );

		// Calculate cropping mode from old image options.
		if ( ! $hard_crop ) {
			update_option( &#039;woocommerce_thumbnail_cropping&#039;, &#039;uncropped&#039; );
		} elseif ( $width === $height ) {
			update_option( &#039;woocommerce_thumbnail_cropping&#039;, &#039;1:1&#039; );
		} else {
			$ratio    = $width / $height;
			$fraction = wc_decimal_to_fraction( $ratio );

			if ( $fraction ) {
				update_option( &#039;woocommerce_thumbnail_cropping&#039;, &#039;custom&#039; );
				update_option( &#039;woocommerce_thumbnail_cropping_custom_width&#039;, $fraction[0] );
				update_option( &#039;woocommerce_thumbnail_cropping_custom_height&#039;, $fraction[1] );
			}
		}
	}

	// Single is uncropped.
	if ( ! empty( $old_single_size[&#039;width&#039;] ) ) {
		update_option( &#039;woocommerce_single_image_width&#039;, absint( $old_single_size[&#039;width&#039;] ) );
	}
}

/**
 * Migrate webhooks from post type to CRUD.
 */
function wc_update_330_webhooks() {
	register_post_type( &#039;shop_webhook&#039; );

	// Map statuses from post_type to Webhooks CRUD.
	$statuses = array(
		&#039;publish&#039; =&gt; &#039;active&#039;,
		&#039;draft&#039;   =&gt; &#039;paused&#039;,
		&#039;pending&#039; =&gt; &#039;disabled&#039;,
	);

	$posts = get_posts(
		array(
			&#039;posts_per_page&#039; =&gt; -1,
			&#039;post_type&#039;      =&gt; &#039;shop_webhook&#039;,
			&#039;post_status&#039;    =&gt; &#039;any&#039;,
		)
	);

	foreach ( $posts as $post ) {
		$webhook = new WC_Webhook();
		$webhook-&gt;set_name( $post-&gt;post_title );
		$webhook-&gt;set_status( isset( $statuses[ $post-&gt;post_status ] ) ? $statuses[ $post-&gt;post_status ] : &#039;disabled&#039; );
		$webhook-&gt;set_delivery_url( get_post_meta( $post-&gt;ID, &#039;_delivery_url&#039;, true ) );
		$webhook-&gt;set_secret( get_post_meta( $post-&gt;ID, &#039;_secret&#039;, true ) );
		$webhook-&gt;set_topic( get_post_meta( $post-&gt;ID, &#039;_topic&#039;, true ) );
		$webhook-&gt;set_api_version( get_post_meta( $post-&gt;ID, &#039;_api_version&#039;, true ) );
		$webhook-&gt;set_user_id( $post-&gt;post_author );
		$webhook-&gt;set_pending_delivery( false );
		$webhook-&gt;save();

		wp_delete_post( $post-&gt;ID, true );
	}

	unregister_post_type( &#039;shop_webhook&#039; );
}

/**
 * Assign default cat to all products with no cats.
 */
function wc_update_330_set_default_product_cat() {
	/*
	 * When a product category is deleted, we need to check
	 * if the product has no categories assigned. Then assign
	 * it a default category.
	 */
	wc_get_container()-&gt;get( AssignDefaultCategory::class )-&gt;maybe_assign_default_product_cat();
}

/**
 * Update product stock status to use the new onbackorder status.
 */
function wc_update_330_product_stock_status() {
	global $wpdb;

	if ( &#039;yes&#039; !== get_option( &#039;woocommerce_manage_stock&#039; ) ) {
		return;
	}

	$min_stock_amount = (int) get_option( &#039;woocommerce_notify_no_stock_amount&#039;, 0 );

	// Get all products that have stock management enabled, stock less than or equal to min stock amount, and backorders enabled.
	$post_ids = $wpdb-&gt;get_col(
		$wpdb-&gt;prepare(
			&quot;SELECT t1.post_id FROM $wpdb-&gt;postmeta t1
			INNER JOIN $wpdb-&gt;postmeta t2
				ON t1.post_id = t2.post_id
				AND t1.meta_key = &#039;_manage_stock&#039; AND t1.meta_value = &#039;yes&#039;
				AND t2.meta_key = &#039;_stock&#039; AND t2.meta_value &lt;= %d
			INNER JOIN $wpdb-&gt;postmeta t3
				ON t2.post_id = t3.post_id
				AND t3.meta_key = &#039;_backorders&#039; AND ( t3.meta_value = &#039;yes&#039; OR t3.meta_value = &#039;notify&#039; )&quot;,
			$min_stock_amount
		)
	);

	if ( empty( $post_ids ) ) {
		return;
	}

	$post_ids = array_map( &#039;absint&#039;, $post_ids );

	// phpcs:disable WordPress.DB.PreparedSQL.NotPrepared
	// Set the status to onbackorder for those products.
	$wpdb-&gt;query(
		&quot;UPDATE $wpdb-&gt;postmeta
		SET meta_value = &#039;onbackorder&#039;
		WHERE meta_key = &#039;_stock_status&#039; AND post_id IN ( &quot; . implode( &#039;,&#039;, $post_ids ) . &#039; )&#039;
	);
	// phpcs:enable WordPress.DB.PreparedSQL.NotPrepared
}

/**
 * Clear addons page transients
 */
function wc_update_330_clear_transients() {
	delete_transient( &#039;wc_addons_sections&#039; );
	delete_transient( &#039;wc_addons_featured&#039; );
}

/**
 * Set PayPal&#039;s sandbox credentials.
 */
function wc_update_330_set_paypal_sandbox_credentials() {

	$paypal_settings = get_option( &#039;woocommerce_paypal_settings&#039; );

	if ( isset( $paypal_settings[&#039;testmode&#039;] ) &amp;&amp; &#039;yes&#039; === $paypal_settings[&#039;testmode&#039;] ) {
		foreach ( array( &#039;api_username&#039;, &#039;api_password&#039;, &#039;api_signature&#039; ) as $credential ) {
			if ( ! empty( $paypal_settings[ $credential ] ) ) {
				$paypal_settings[ &#039;sandbox_&#039; . $credential ] = $paypal_settings[ $credential ];
			}
		}

		update_option( &#039;woocommerce_paypal_settings&#039;, $paypal_settings );
	}
}

/**
 * Update DB Version.
 */
function wc_update_330_db_version() {
	WC_Install::update_db_version( &#039;3.3.0&#039; );
}

/**
 * Update state codes for Ireland and BD.
 */
function wc_update_340_states() {
	$country_states = array(
		&#039;IE&#039; =&gt; array(
			&#039;CK&#039; =&gt; &#039;CO&#039;,
			&#039;DN&#039; =&gt; &#039;D&#039;,
			&#039;GY&#039; =&gt; &#039;G&#039;,
			&#039;TY&#039; =&gt; &#039;TA&#039;,
		),
		&#039;BD&#039; =&gt; array(
			&#039;BAG&#039;  =&gt; &#039;BD-05&#039;,
			&#039;BAN&#039;  =&gt; &#039;BD-01&#039;,
			&#039;BAR&#039;  =&gt; &#039;BD-02&#039;,
			&#039;BARI&#039; =&gt; &#039;BD-06&#039;,
			&#039;BHO&#039;  =&gt; &#039;BD-07&#039;,
			&#039;BOG&#039;  =&gt; &#039;BD-03&#039;,
			&#039;BRA&#039;  =&gt; &#039;BD-04&#039;,
			&#039;CHA&#039;  =&gt; &#039;BD-09&#039;,
			&#039;CHI&#039;  =&gt; &#039;BD-10&#039;,
			&#039;CHU&#039;  =&gt; &#039;BD-12&#039;,
			&#039;COX&#039;  =&gt; &#039;BD-11&#039;,
			&#039;COM&#039;  =&gt; &#039;BD-08&#039;,
			&#039;DHA&#039;  =&gt; &#039;BD-13&#039;,
			&#039;DIN&#039;  =&gt; &#039;BD-14&#039;,
			&#039;FAR&#039;  =&gt; &#039;BD-15&#039;,
			&#039;FEN&#039;  =&gt; &#039;BD-16&#039;,
			&#039;GAI&#039;  =&gt; &#039;BD-19&#039;,
			&#039;GAZI&#039; =&gt; &#039;BD-18&#039;,
			&#039;GOP&#039;  =&gt; &#039;BD-17&#039;,
			&#039;HAB&#039;  =&gt; &#039;BD-20&#039;,
			&#039;JAM&#039;  =&gt; &#039;BD-21&#039;,
			&#039;JES&#039;  =&gt; &#039;BD-22&#039;,
			&#039;JHA&#039;  =&gt; &#039;BD-25&#039;,
			&#039;JHE&#039;  =&gt; &#039;BD-23&#039;,
			&#039;JOY&#039;  =&gt; &#039;BD-24&#039;,
			&#039;KHA&#039;  =&gt; &#039;BD-29&#039;,
			&#039;KHU&#039;  =&gt; &#039;BD-27&#039;,
			&#039;KIS&#039;  =&gt; &#039;BD-26&#039;,
			&#039;KUR&#039;  =&gt; &#039;BD-28&#039;,
			&#039;KUS&#039;  =&gt; &#039;BD-30&#039;,
			&#039;LAK&#039;  =&gt; &#039;BD-31&#039;,
			&#039;LAL&#039;  =&gt; &#039;BD-32&#039;,
			&#039;MAD&#039;  =&gt; &#039;BD-36&#039;,
			&#039;MAG&#039;  =&gt; &#039;BD-37&#039;,
			&#039;MAN&#039;  =&gt; &#039;BD-33&#039;,
			&#039;MEH&#039;  =&gt; &#039;BD-39&#039;,
			&#039;MOU&#039;  =&gt; &#039;BD-38&#039;,
			&#039;MUN&#039;  =&gt; &#039;BD-35&#039;,
			&#039;MYM&#039;  =&gt; &#039;BD-34&#039;,
			&#039;NAO&#039;  =&gt; &#039;BD-48&#039;,
			&#039;NAR&#039;  =&gt; &#039;BD-43&#039;,
			&#039;NARG&#039; =&gt; &#039;BD-40&#039;,
			&#039;NARD&#039; =&gt; &#039;BD-42&#039;,
			&#039;NAT&#039;  =&gt; &#039;BD-44&#039;,
			&#039;NAW&#039;  =&gt; &#039;BD-45&#039;,
			&#039;NET&#039;  =&gt; &#039;BD-41&#039;,
			&#039;NIL&#039;  =&gt; &#039;BD-46&#039;,
			&#039;NOA&#039;  =&gt; &#039;BD-47&#039;,
			&#039;PAB&#039;  =&gt; &#039;BD-49&#039;,
			&#039;PAN&#039;  =&gt; &#039;BD-52&#039;,
			&#039;PAT&#039;  =&gt; &#039;BD-51&#039;,
			&#039;PIR&#039;  =&gt; &#039;BD-50&#039;,
			&#039;RAJB&#039; =&gt; &#039;BD-53&#039;,
			&#039;RAJ&#039;  =&gt; &#039;BD-54&#039;,
			&#039;RAN&#039;  =&gt; &#039;BD-56&#039;,
			&#039;RANP&#039; =&gt; &#039;BD-55&#039;,
			&#039;SAT&#039;  =&gt; &#039;BD-58&#039;,
			&#039;SHA&#039;  =&gt; &#039;BD-57&#039;,
			&#039;SIR&#039;  =&gt; &#039;BD-59&#039;,
			&#039;SUN&#039;  =&gt; &#039;BD-61&#039;,
			&#039;SYL&#039;  =&gt; &#039;BD-60&#039;,
			&#039;TAN&#039;  =&gt; &#039;BD-63&#039;,
			&#039;THA&#039;  =&gt; &#039;BD-64&#039;,
		),
	);

	update_option( &#039;woocommerce_update_340_states&#039;, $country_states );
}

/**
 * Update next state in the queue.
 *
 * @return bool True to run again, false if completed.
 */
function wc_update_340_state() {
	global $wpdb;

	$country_states = array_filter( (array) get_option( &#039;woocommerce_update_340_states&#039;, array() ) );

	if ( empty( $country_states ) ) {
		return false;
	}

	foreach ( $country_states as $country =&gt; $states ) {
		foreach ( $states as $old =&gt; $new ) {
			$wpdb-&gt;query(
				$wpdb-&gt;prepare(
					&quot;UPDATE $wpdb-&gt;postmeta
					SET meta_value = %s
					WHERE meta_key IN ( &#039;_billing_state&#039;, &#039;_shipping_state&#039; )
					AND meta_value = %s&quot;,
					$new,
					$old
				)
			);
			$wpdb-&gt;update(
				&quot;{$wpdb-&gt;prefix}woocommerce_shipping_zone_locations&quot;,
				array(
					&#039;location_code&#039; =&gt; $country . &#039;:&#039; . $new,
				),
				array(
					&#039;location_code&#039; =&gt; $country . &#039;:&#039; . $old,
				)
			);
			$wpdb-&gt;update(
				&quot;{$wpdb-&gt;prefix}woocommerce_tax_rates&quot;,
				array(
					&#039;tax_rate_state&#039; =&gt; strtoupper( $new ),
				),
				array(
					&#039;tax_rate_state&#039; =&gt; strtoupper( $old ),
				)
			);
			unset( $country_states[ $country ][ $old ] );

			if ( empty( $country_states[ $country ] ) ) {
				unset( $country_states[ $country ] );
			}
			break 2;
		}
	}

	if ( ! empty( $country_states ) ) {
		return update_option( &#039;woocommerce_update_340_states&#039;, $country_states );
	}

	delete_option( &#039;woocommerce_update_340_states&#039; );

	return false;
}

/**
 * Set last active prop for users.
 */
function wc_update_340_last_active() {
	global $wpdb;
	// @codingStandardsIgnoreStart.
	$wpdb-&gt;query(
		$wpdb-&gt;prepare( &quot;
			INSERT INTO {$wpdb-&gt;usermeta} (user_id, meta_key, meta_value)
			SELECT DISTINCT users.ID, &#039;wc_last_active&#039;, %s
			FROM {$wpdb-&gt;users} as users
			LEFT OUTER JOIN {$wpdb-&gt;usermeta} AS usermeta ON users.ID = usermeta.user_id AND usermeta.meta_key = &#039;wc_last_active&#039;
			WHERE usermeta.meta_value IS NULL
			&quot;,
			(string) strtotime( date( &#039;Y-m-d&#039;, current_time( &#039;timestamp&#039;, true ) ) )
		)
	);
	// @codingStandardsIgnoreEnd.
}

/**
 * Update DB Version.
 */
function wc_update_340_db_version() {
	WC_Install::update_db_version( &#039;3.4.0&#039; );
}

/**
 * Remove duplicate foreign keys
 *
 * @return void
 */
function wc_update_343_cleanup_foreign_keys() {
	global $wpdb;

	$create_table_sql = $wpdb-&gt;get_var( &quot;SHOW CREATE TABLE {$wpdb-&gt;prefix}wc_download_log&quot;, 1 );

	if ( ! empty( $create_table_sql ) ) {
		// Extract and remove the foreign key constraints matching %wc_download_log_ib%.
		if ( preg_match_all( &#039;/CONSTRAINT `([^`]*wc_download_log_ib[^`]*)` FOREIGN KEY/&#039;, $create_table_sql, $matches ) &amp;&amp; ! empty( $matches[1] ) ) {
			foreach ( $matches[1] as $foreign_key_name ) {
				$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_download_log DROP FOREIGN KEY `{$foreign_key_name}`&quot; ); // phpcs:ignore WordPress.DB.PreparedSQL.InterpolatedNotPrepared
			}
		}
	}
}

/**
 * Update DB version.
 *
 * @return void
 */
function wc_update_343_db_version() {
	WC_Install::update_db_version( &#039;3.4.3&#039; );
}

/**
 * Recreate user roles so existing users will get the new capabilities.
 *
 * @return void
 */
function wc_update_344_recreate_roles() {
	WC_Install::remove_roles();
	WC_Install::create_roles();
}

/**
 * Update DB version.
 *
 * @return void
 */
function wc_update_344_db_version() {
	WC_Install::update_db_version( &#039;3.4.4&#039; );
}

/**
 * Set the comment type to &#039;review&#039; for product reviews that don&#039;t have a comment type.
 */
function wc_update_350_reviews_comment_type() {
	global $wpdb;

	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;prefix}comments JOIN {$wpdb-&gt;prefix}posts ON {$wpdb-&gt;prefix}posts.ID = {$wpdb-&gt;prefix}comments.comment_post_ID AND ( {$wpdb-&gt;prefix}posts.post_type = &#039;product&#039; OR {$wpdb-&gt;prefix}posts.post_type = &#039;product_variation&#039; ) SET {$wpdb-&gt;prefix}comments.comment_type = &#039;review&#039; WHERE {$wpdb-&gt;prefix}comments.comment_type = &#039;&#039;&quot;
	);
}

/**
 * Update DB Version.
 */
function wc_update_350_db_version() {
	WC_Install::update_db_version( &#039;3.5.0&#039; );
}

/**
 * Drop the fk_wc_download_log_permission_id FK as we use a new one with the table and blog prefix for MS compatibility.
 *
 * @return void
 */
function wc_update_352_drop_download_log_fk() {
	global $wpdb;

	$create_table_sql = $wpdb-&gt;get_var( &quot;SHOW CREATE TABLE {$wpdb-&gt;prefix}wc_download_log&quot;, 1 );

	if ( ! empty( $create_table_sql ) ) {
		if ( strpos( $create_table_sql, &#039;CONSTRAINT `fk_wc_download_log_permission_id` FOREIGN KEY&#039; ) !== false ) {
			$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_download_log DROP FOREIGN KEY fk_wc_download_log_permission_id&quot; ); // phpcs:ignore WordPress.WP.PreparedSQL.NotPrepared
		}
	}
}

/**
 * Remove edit_user capabilities from shop managers and use &quot;translated&quot; capabilities instead.
 * See wc_shop_manager_has_capability function.
 */
function wc_update_354_modify_shop_manager_caps() {
	global $wp_roles;

	if ( ! class_exists( &#039;WP_Roles&#039; ) ) {
		return;
	}

	if ( ! isset( $wp_roles ) ) {
		$wp_roles = new WP_Roles(); // @codingStandardsIgnoreLine
	}

	$wp_roles-&gt;remove_cap( &#039;shop_manager&#039;, &#039;edit_users&#039; );
}

/**
 * Update DB Version.
 */
function wc_update_354_db_version() {
	WC_Install::update_db_version( &#039;3.5.4&#039; );
}

/**
 * Update product lookup tables in bulk.
 */
function wc_update_360_product_lookup_tables() {
	wc_update_product_lookup_tables();
}

/**
 * Renames ordering meta to be consistent across taxonomies.
 */
function wc_update_360_term_meta() {
	global $wpdb;

	$wpdb-&gt;query( &quot;UPDATE {$wpdb-&gt;termmeta} SET meta_key = &#039;order&#039; WHERE meta_key LIKE &#039;order_pa_%&#039;;&quot; );
}

/**
 * Add new user_order_remaining_expires to speed up user download permission fetching.
 *
 * @return void
 */
function wc_update_360_downloadable_product_permissions_index() {
	global $wpdb;

	$index_exists = $wpdb-&gt;get_row( &quot;SHOW INDEX FROM {$wpdb-&gt;prefix}woocommerce_downloadable_product_permissions WHERE key_name = &#039;user_order_remaining_expires&#039;&quot; );

	if ( is_null( $index_exists ) ) {
		$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}woocommerce_downloadable_product_permissions ADD INDEX user_order_remaining_expires (user_id,order_id,downloads_remaining,access_expires)&quot; );
	}
}

/**
 * Update DB Version.
 */
function wc_update_360_db_version() {
	WC_Install::update_db_version( &#039;3.6.0&#039; );
}

/**
 * Put tax classes into a DB table.
 *
 * @return void
 */
function wc_update_370_tax_rate_classes() {
	global $wpdb;

	$classes = array_map( &#039;trim&#039;, explode( &quot;\n&quot;, get_option( &#039;woocommerce_tax_classes&#039; ) ) );

	if ( $classes ) {
		foreach ( $classes as $class ) {
			if ( empty( $class ) ) {
				continue;
			}
			WC_Tax::create_tax_class( $class );
		}
	}
	delete_option( &#039;woocommerce_tax_classes&#039; );
}

/**
 * Update currency settings for 3.7.0
 *
 * @return void
 */
function wc_update_370_mro_std_currency() {
	global $wpdb;

	// Fix currency settings for MRU and STN currency.
	$current_currency = get_option( &#039;woocommerce_currency&#039; );

	if ( &#039;MRO&#039; === $current_currency ) {
		update_option( &#039;woocommerce_currency&#039;, &#039;MRU&#039; );
	}

	if ( &#039;STD&#039; === $current_currency ) {
		update_option( &#039;woocommerce_currency&#039;, &#039;STN&#039; );
	}

	// Update MRU currency code.
	$wpdb-&gt;update(
		$wpdb-&gt;postmeta,
		array(
			&#039;meta_value&#039; =&gt; &#039;MRU&#039;, // phpcs:ignore WordPress.DB.SlowDBQuery.slow_db_query_meta_value
		),
		array(
			&#039;meta_key&#039;   =&gt; &#039;_order_currency&#039;, // phpcs:ignore WordPress.DB.SlowDBQuery.slow_db_query_meta_key
			&#039;meta_value&#039; =&gt; &#039;MRO&#039;, // phpcs:ignore WordPress.DB.SlowDBQuery.slow_db_query_meta_value
		)
	);

	// Update STN currency code.
	$wpdb-&gt;update(
		$wpdb-&gt;postmeta,
		array(
			&#039;meta_value&#039; =&gt; &#039;STN&#039;, // phpcs:ignore WordPress.DB.SlowDBQuery.slow_db_query_meta_value
		),
		array(
			&#039;meta_key&#039;   =&gt; &#039;_order_currency&#039;, // phpcs:ignore WordPress.DB.SlowDBQuery.slow_db_query_meta_key
			&#039;meta_value&#039; =&gt; &#039;STD&#039;, // phpcs:ignore WordPress.DB.SlowDBQuery.slow_db_query_meta_value
		)
	);
}

/**
 * Update DB Version.
 */
function wc_update_370_db_version() {
	WC_Install::update_db_version( &#039;3.7.0&#039; );
}

/**
 * We&#039;ve moved the MaxMind database to a new location, as per the TOS&#039; requirement that the database not
 * be publicly accessible.
 */
function wc_update_390_move_maxmind_database() {
	// Make sure to use all of the correct filters to pull the local database path.
	$old_path = apply_filters( &#039;woocommerce_geolocation_local_database_path&#039;, WP_CONTENT_DIR . &#039;/uploads/GeoLite2-Country.mmdb&#039;, 2 );

	// Generate a prefix for the old file and store it in the integration as it would expect it.
	$prefix = wp_generate_password( 32, false );
	update_option( &#039;woocommerce_maxmind_geolocation_settings&#039;, array( &#039;database_prefix&#039; =&gt; $prefix ) );

	// Generate the new path in the same way that the integration will.
	$uploads_dir = wp_upload_dir();
	$new_path    = trailingslashit( $uploads_dir[&#039;basedir&#039;] ) . &#039;woocommerce_uploads/&#039; . $prefix . &#039;-GeoLite2-Country.mmdb&#039;;
	$new_path    = apply_filters( &#039;woocommerce_geolocation_local_database_path&#039;, $new_path, 2 );
	$new_path    = apply_filters( &#039;woocommerce_maxmind_geolocation_database_path&#039;, $new_path );

	// phpcs:ignore WordPress.PHP.NoSilencedErrors.Discouraged
	@rename( $old_path, $new_path );
}

/**
 * So that we can best meet MaxMind&#039;s TOS, the geolocation database update cron should run once per 15 days.
 */
function wc_update_390_change_geolocation_database_update_cron() {
	wp_clear_scheduled_hook( &#039;woocommerce_geoip_updater&#039; );
	wp_schedule_event( time() + ( DAY_IN_SECONDS * 15 ), &#039;fifteendays&#039;, &#039;woocommerce_geoip_updater&#039; );
}

/**
 * Update DB version.
 */
function wc_update_390_db_version() {
	WC_Install::update_db_version( &#039;3.9.0&#039; );
}

/**
 * Increase column size
 */
function wc_update_400_increase_size_of_column() {
	global $wpdb;
	$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_product_meta_lookup MODIFY COLUMN `min_price` decimal(19,4) NULL default NULL&quot; );
	$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_product_meta_lookup MODIFY COLUMN `max_price` decimal(19,4) NULL default NULL&quot; );
}

/**
 * Reset ActionScheduler migration status. Needs AS &gt;= 3.0 shipped with WC &gt;= 4.0.
 */
function wc_update_400_reset_action_scheduler_migration_status() {
	if (
		class_exists( &#039;ActionScheduler_DataController&#039; ) &amp;&amp;
		method_exists( &#039;ActionScheduler_DataController&#039;, &#039;mark_migration_incomplete&#039; )
	) {
		\ActionScheduler_DataController::mark_migration_incomplete();
	}
}

/**
 * Update DB version.
 */
function wc_update_400_db_version() {
	WC_Install::update_db_version( &#039;4.0.0&#039; );
}

/**
 * Register attributes as terms for variable products, in increments of 100 products.
 *
 * This migration was added to support a new mechanism to improve the filtering of
 * variable products by attribute (https://github.com/woocommerce/woocommerce/pull/26260),
 * however that mechanism was later reverted (https://github.com/woocommerce/woocommerce/pull/27625)
 * due to numerous issues found. Thus the migration is no longer needed.
 *
 * @return bool true if the migration needs to be run again.
 */
function wc_update_440_insert_attribute_terms_for_variable_products() {
	return false;
}

/**
 * Update DB version.
 */
function wc_update_440_db_version() {
	WC_Install::update_db_version( &#039;4.4.0&#039; );
}

/**
 * Update DB version to 4.5.0.
 */
function wc_update_450_db_version() {
	WC_Install::update_db_version( &#039;4.5.0&#039; );
}

/**
 * Sanitize all coupons code.
 *
 * @return bool True to run again, false if completed.
 */
function wc_update_450_sanitize_coupons_code() {
	global $wpdb;

	$coupon_id      = 0;
	$last_coupon_id = get_option( &#039;woocommerce_update_450_last_coupon_id&#039;, &#039;0&#039; );

	$coupons = $wpdb-&gt;get_results(
		$wpdb-&gt;prepare(
			&quot;SELECT ID, post_title FROM $wpdb-&gt;posts WHERE ID &gt; %d AND post_type = &#039;shop_coupon&#039; LIMIT 10&quot;,
			$last_coupon_id
		),
		ARRAY_A
	);

	if ( empty( $coupons ) ) {
		delete_option( &#039;woocommerce_update_450_last_coupon_id&#039; );
		return false;
	}

	foreach ( $coupons as $key =&gt; $data ) {
		$coupon_id = intval( $data[&#039;ID&#039;] );
		$code      = trim( wp_filter_kses( $data[&#039;post_title&#039;] ) );

		if ( ! empty( $code ) &amp;&amp; $data[&#039;post_title&#039;] !== $code ) {
			$wpdb-&gt;update(
				$wpdb-&gt;posts,
				array(
					&#039;post_title&#039; =&gt; $code,
				),
				array(
					&#039;ID&#039; =&gt; $coupon_id,
				),
				array(
					&#039;%s&#039;,
				),
				array(
					&#039;%d&#039;,
				)
			);

			// Clean cache.
			clean_post_cache( $coupon_id );
			wp_cache_delete( WC_Cache_Helper::get_cache_prefix( &#039;coupons&#039; ) . &#039;coupon_id_from_code_&#039; . $data[&#039;post_title&#039;], &#039;coupons&#039; );
		}
	}

	// Start the run again.
	if ( $coupon_id ) {
		return update_option( &#039;woocommerce_update_450_last_coupon_id&#039;, $coupon_id );
	}

	delete_option( &#039;woocommerce_update_450_last_coupon_id&#039; );
	return false;
}

/**
 * Fixes product review count that might have been incorrect.
 *
 * See @link https://github.com/woocommerce/woocommerce/issues/27688.
 */
function wc_update_500_fix_product_review_count() {
	global $wpdb;

	$product_id      = 0;
	$last_product_id = get_option( &#039;woocommerce_update_500_last_product_id&#039;, &#039;0&#039; );

	$products_data = $wpdb-&gt;get_results(
		$wpdb-&gt;prepare(
			&quot;
				SELECT post_id, meta_value
				FROM $wpdb-&gt;postmeta
				JOIN $wpdb-&gt;posts
					ON $wpdb-&gt;postmeta.post_id = $wpdb-&gt;posts.ID
				WHERE
					post_type = &#039;product&#039;
					AND post_status = &#039;publish&#039;
					AND post_id &gt; %d
					AND meta_key = &#039;_wc_review_count&#039;
				ORDER BY post_id ASC
				LIMIT 10
			&quot;,
			$last_product_id
		),
		ARRAY_A
	);

	if ( empty( $products_data ) ) {
		delete_option( &#039;woocommerce_update_500_last_product_id&#039; );
		return false;
	}

	$product_ids_to_check = array_column( $products_data, &#039;post_id&#039; );
	$actual_review_counts = WC_Comments::get_review_counts_for_product_ids( $product_ids_to_check );

	foreach ( $products_data as $product_data ) {
		$product_id           = intval( $product_data[&#039;post_id&#039;] );
		$current_review_count = intval( $product_data[&#039;meta_value&#039;] );

		if ( intval( $actual_review_counts[ $product_id ] ) !== $current_review_count ) {
			WC_Comments::clear_transients( $product_id );
		}
	}

	// Start the run again.
	if ( $product_id ) {
		return update_option( &#039;woocommerce_update_500_last_product_id&#039;, $product_id );
	}

	delete_option( &#039;woocommerce_update_500_last_product_id&#039; );
	return false;
}

/**
 * Update DB version to 5.0.0.
 */
function wc_update_500_db_version() {
	WC_Install::update_db_version( &#039;5.0.0&#039; );
}

/**
 * Creates the refund and returns policy page.
 *
 * See @link https://github.com/woocommerce/woocommerce/issues/29235.
 */
function wc_update_560_create_refund_returns_page() {
	/**
	 * Filter on the pages created to return what we expect.
	 *
	 * @param array $pages The default WC pages.
	 */
	function filter_created_pages( $pages ) {
		$page_to_create = array( &#039;refund_returns&#039; );

		return array_intersect_key( $pages, array_flip( $page_to_create ) );
	}

	add_filter( &#039;woocommerce_create_pages&#039;, &#039;filter_created_pages&#039; );

	WC_Install::create_pages();

	remove_filter( &#039;woocommerce_create_pages&#039;, &#039;filter_created_pages&#039; );
}

/**
 * Update DB version to 5.6.0.
 */
function wc_update_560_db_version() {
	WC_Install::update_db_version( &#039;5.6.0&#039; );
}

/**
 * Migrate rate limit options to the new table.
 *
 * See @link https://github.com/woocommerce/woocommerce/issues/27103.
 */
function wc_update_600_migrate_rate_limit_options() {
	global $wpdb;

	$rate_limits   = $wpdb-&gt;get_results(
		&quot;
			SELECT option_name, option_value
			FROM $wpdb-&gt;options
			WHERE option_name LIKE &#039;woocommerce_rate_limit_add_payment_method_%&#039;
		&quot;,
		ARRAY_A
	);
	$prefix_length = strlen( &#039;woocommerce_rate_limit_&#039; );

	foreach ( $rate_limits as $rate_limit ) {
		$new_delay = (int) $rate_limit[&#039;option_value&#039;] - time();

		// Migrate the limit if it hasn&#039;t expired yet.
		if ( 0 &lt; $new_delay ) {
			$action_id = substr( $rate_limit[&#039;option_name&#039;], $prefix_length );
			WC_Rate_Limiter::set_rate_limit( $action_id, $new_delay );
		}

		delete_option( $rate_limit[&#039;option_name&#039;] );
	}
}

/**
 * Update DB version to 6.0.0.
 */
function wc_update_600_db_version() {
	WC_Install::update_db_version( &#039;6.0.0&#039; );
}

/**
 * Create the product attributes lookup table and initiate its filling,
 * unless the table had been already created manually (via the tools page).
 *
 * @return false Always false, since the LookupDataStore class handles all the data filling process.
 */
function wc_update_630_create_product_attributes_lookup_table() {
	$data_store       = wc_get_container()-&gt;get( LookupDataStore::class );
	$data_regenerator = wc_get_container()-&gt;get( DataRegenerator::class );

	/**
	 * If the table exists and contains data, it was manually created by user before the migration ran.
	 * If the table exists but is empty, it was likely created right now via dbDelta, so a table regenerations is needed (unless one is in progress already).
	 */
	if ( ! $data_store-&gt;check_lookup_table_exists() || ( ! $data_store-&gt;lookup_table_has_data() &amp;&amp; ! $data_store-&gt;regeneration_is_in_progress() ) ) {
		$data_regenerator-&gt;initiate_regeneration();
	}

	return false;
}

/**
 *
 * Update DB version to 6.3.0.
 */
function wc_update_630_db_version() {
	WC_Install::update_db_version( &#039;6.3.0&#039; );
}

/**
 * Create the primary key for the product attributes lookup table if it doesn&#039;t exist already.
 *
 * @return bool Always false.
 */
function wc_update_640_add_primary_key_to_product_attributes_lookup_table() {
	wc_get_container()-&gt;get( DataRegenerator::class )-&gt;create_table_primary_index();

	return false;
}

/**
 *
 * Update DB version to 6.4.0.
 */
function wc_update_640_db_version() {
	WC_Install::update_db_version( &#039;6.4.0&#039; );
}

/**
 * Add the standard WooCommerce upload directories to the Approved Product Download Directories list
 * and start populating it based on existing product download URLs, but do not enable the feature
 * (for existing installations, a site admin should review and make a conscious decision to enable).
 */
function wc_update_650_approved_download_directories() {
	$directory_sync = wc_get_container()-&gt;get( Download_Directories_Sync::class );
	$directory_sync-&gt;init_hooks();
	$directory_sync-&gt;init_feature( true, false );
}

/**
 * In some cases, the approved download directories table may not have been successfully created during the update to
 * 6.5.0. If this was the case we will need to re-initialize the feature.
 */
function wc_update_651_approved_download_directories() {
	global $wpdb;

	$download_directories = wc_get_container()-&gt;get( Download_Directories::class );
	$directory_sync       = wc_get_container()-&gt;get( Download_Directories_Sync::class );

	// Check if at least 1 row exists, without scanning the entire table.
	$is_populated = (bool) $wpdb-&gt;get_var(
		&#039;SELECT 1 FROM &#039; . $download_directories-&gt;get_table() . &#039; LIMIT 1&#039;
	);

	// If the table contains rules (or does not yet, but a sync is in-progress) we should do nothing else at this point.
	if ( $is_populated || $directory_sync-&gt;in_progress() ) {
		return;
	}

	// Otherwise, it seems reasonable to assume that the feature was not initialized as expected during the update to
	// 6.5.0. Let&#039;s give that another try.
	$directory_sync-&gt;init_hooks();
	$directory_sync-&gt;init_feature( true, false );
}

/**
 * Purges the comments count cache after 6.7.0 split reviews from the comments page.
 */
function wc_update_670_purge_comments_count_cache() {
	if ( ! is_callable( &#039;WC_Comments::delete_comments_count_cache&#039; ) ) {
		return;
	}

	WC_Comments::delete_comments_count_cache();
}
/**
 * Remove unnecessary foreign keys.
 *
 * @return void
 */
function wc_update_700_remove_download_log_fk() {
	global $wpdb;

	$create_table_sql = $wpdb-&gt;get_var( &quot;SHOW CREATE TABLE {$wpdb-&gt;prefix}wc_download_log&quot;, 1 );

	if ( ! empty( $create_table_sql ) ) {
		if ( preg_match_all( &#039;/CONSTRAINT `([^`]*)` FOREIGN KEY/&#039;, $create_table_sql, $matches ) &amp;&amp; ! empty( $matches[1] ) ) {
			foreach ( $matches[1] as $foreign_key_name ) {
				$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_download_log DROP FOREIGN KEY `{$foreign_key_name}`&quot; ); // phpcs:ignore WordPress.DB.PreparedSQL.InterpolatedNotPrepared
			}
		}
	}
}

/**
 * Remove the transient data for recommended marketing extensions.
 */
function wc_update_700_remove_recommended_marketing_plugins_transient() {
	delete_transient( MarketingSpecs::RECOMMENDED_PLUGINS_TRANSIENT );
}

/**
 * Update the New Zealand state codes in the database
 * after they were updated in code to the CLDR standard.
 */
function wc_update_721_adjust_new_zealand_states() {
	return MigrationHelper::migrate_country_states(
		&#039;NZ&#039;,
		array(
			&#039;NL&#039; =&gt; &#039;NTL&#039;,
			&#039;AK&#039; =&gt; &#039;AUK&#039;,
			&#039;WA&#039; =&gt; &#039;WKO&#039;,
			&#039;BP&#039; =&gt; &#039;BOP&#039;,
			&#039;TK&#039; =&gt; &#039;TKI&#039;,
			&#039;GI&#039; =&gt; &#039;GIS&#039;,
			&#039;HB&#039; =&gt; &#039;HKB&#039;,
			&#039;MW&#039; =&gt; &#039;MWT&#039;,
			&#039;WE&#039; =&gt; &#039;WGN&#039;,
			&#039;NS&#039; =&gt; &#039;NSN&#039;,
			&#039;MB&#039; =&gt; &#039;MBH&#039;,
			&#039;TM&#039; =&gt; &#039;TAS&#039;,
			&#039;WC&#039; =&gt; &#039;WTC&#039;,
			&#039;CT&#039; =&gt; &#039;CAN&#039;,
			&#039;OT&#039; =&gt; &#039;OTA&#039;,
			&#039;SL&#039; =&gt; &#039;STL&#039;,
		)
	);
}

/**
 * Update the Ukraine state codes in the database
 * after they were updated in code to the CLDR standard.
 */
function wc_update_721_adjust_ukraine_states() {
	return MigrationHelper::migrate_country_states(
		&#039;UA&#039;,
		array(
			&#039;VN&#039; =&gt; &#039;UA05&#039;,
			&#039;LH&#039; =&gt; &#039;UA09&#039;,
			&#039;VL&#039; =&gt; &#039;UA07&#039;,
			&#039;DP&#039; =&gt; &#039;UA12&#039;,
			&#039;DT&#039; =&gt; &#039;UA14&#039;,
			&#039;ZT&#039; =&gt; &#039;UA18&#039;,
			&#039;ZK&#039; =&gt; &#039;UA21&#039;,
			&#039;ZP&#039; =&gt; &#039;UA23&#039;,
			&#039;IF&#039; =&gt; &#039;UA26&#039;,
			&#039;KV&#039; =&gt; &#039;UA32&#039;,
			&#039;KH&#039; =&gt; &#039;UA35&#039;,
			&#039;LV&#039; =&gt; &#039;UA46&#039;,
			&#039;MY&#039; =&gt; &#039;UA48&#039;,
			&#039;OD&#039; =&gt; &#039;UA51&#039;,
			&#039;PL&#039; =&gt; &#039;UA53&#039;,
			&#039;RV&#039; =&gt; &#039;UA56&#039;,
			&#039;SM&#039; =&gt; &#039;UA59&#039;,
			&#039;TP&#039; =&gt; &#039;UA61&#039;,
			&#039;KK&#039; =&gt; &#039;UA63&#039;,
			&#039;KS&#039; =&gt; &#039;UA65&#039;,
			&#039;KM&#039; =&gt; &#039;UA68&#039;,
			&#039;CK&#039; =&gt; &#039;UA71&#039;,
			&#039;CH&#039; =&gt; &#039;UA74&#039;,
			&#039;CV&#039; =&gt; &#039;UA77&#039;,
		)
	);
}

/**
 * Update the New Zealand state codes in the database after they were updated in code to the CLDR standard.
 *
 * This is a simple wrapper for the corresponding 7.2.1 update function. The reason we do this (instead of
 * reusing the original function directly) is for better traceability in the Action Scheduler log, in case
 * of problems.
 */
function wc_update_722_adjust_new_zealand_states() {
	return wc_update_721_adjust_new_zealand_states();
}

/**
 * Update the Ukraine state codes in the database after they were updated in code to the CLDR standard.
 *
 * This is a simple wrapper for the corresponding 7.2.1 update function. The reason we do this (instead of
 * reusing the original function directly) is for better traceability in the Action Scheduler log, in case
 * of problems.
 */
function wc_update_722_adjust_ukraine_states() {
	return wc_update_721_adjust_ukraine_states();
}

/**
 * Add new columns date_paid and date_completed to wp_wc_order_stats table in order to provide the option
 * of using the dates in the reports
 */
function wc_update_750_add_columns_to_order_stats_table() {
	global $wpdb;

	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;prefix}wc_order_stats AS order_stats
		INNER JOIN {$wpdb-&gt;postmeta} AS postmeta
			ON postmeta.post_id = order_stats.order_id
			and postmeta.meta_key = &#039;_date_paid&#039;
		SET order_stats.date_paid = IFNULL(FROM_UNIXTIME(postmeta.meta_value), &#039;0000-00-00 00:00:00&#039;);&quot;
	);

	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;prefix}wc_order_stats AS order_stats
		INNER JOIN {$wpdb-&gt;postmeta} AS postmeta
			ON postmeta.post_id = order_stats.order_id
			and postmeta.meta_key = &#039;_date_completed&#039;
		SET order_stats.date_completed = IFNULL(FROM_UNIXTIME(postmeta.meta_value), &#039;0000-00-00 00:00:00&#039;);&quot;
	);

}

/**
 * Disable the experimental product management experience.
 *
 * @return void
 */
function wc_update_750_disable_new_product_management_experience() {
	if ( &#039;yes&#039; === get_option( &#039;woocommerce_new_product_management_enabled&#039; ) ) {
		update_option( &#039;woocommerce_new_product_management_enabled&#039;, &#039;no&#039; );
	}
}

/**
 * Remove the multichannel marketing feature flag and options. This feature is now enabled by default.
 */
function wc_update_770_remove_multichannel_marketing_feature_options() {
	delete_option( &#039;woocommerce_multichannel_marketing_enabled&#039; );
	delete_option( &#039;woocommerce_marketing_overview_welcome_hidden&#039; );
}
</code></pre>
            </article>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <footer class="phpdocumentor phpdocumentor-footer">
    <div class="phpdocumentor-section">
        <span>WooCommerce Code Reference API documentation generated by <a href="http://www.phpdoc.org/">phpDocumentor</a> on August 24th, 2023 at 08:49 am.</span>
    </div>
</footer>

    <script>
        cssVars({});
    </script>
    <script>
        var searchParams = {
            'searchIndex': '..\/js\/searchIndex.json'
        };
    </script>
    <script src="../js/searchIndex.js?updated=1692866950"></script>
    <script src="../js/search.js?updated=1692866950"></script>
</body>
</html>
