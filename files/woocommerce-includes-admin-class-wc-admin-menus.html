<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>WooCommerce Code Reference</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.png" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png"/>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/base.css?updated=1692866946">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/template.css?updated=1692866946">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
            <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8KCYZ2CYMS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8KCYZ2CYMS', {
		'content_group' : 'WooCommerce Core Code Reference',
	});
</script>
        <script src="../js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-top-header">
    <section class="phpdocumentor-section">
        <div class="site-branding">
            <a class="site-logo" href="../index.html"><img width="180" src="../images/logo.svg" alt="WooCommerce" /></a>
        </div>
        <nav class="main-navigation">
            <ul>
                <li><a href="../hooks/hooks.html">Hooks Reference</a></li>
                <li><a href="https://docs.woocommerce.com/">Documentation</a></li>
                <li><a href="https://woocommerce.github.io/woocommerce-rest-api-docs/">REST API Docs</a></li>
                <li><a href="https://woocommerce.com/careers/?utm_source=woocommerce+core+code+reference&utm_medium=devdocs&utm_campaign=woo+careers" target="_blank">We're hiring!</a></li>
            </ul>
        </nav>
    </section>
</header>

<div class="phpdocumentor-header">
    <section class="phpdocumentor-section">
        <h1 class="phpdocumentor-title">WooCommerce Code Reference</h1>
        <section class="phpdocumentor-search">
    <label class="phpdocumentor-label">
        <span class="visually-hidden">Search (click ESC to close search results)</span>
        <input id="autoComplete" tabindex="1" type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading..." disabled />
    </label>
</section>

    </section>
</div>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                <h3 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/default.html"><abbr title="\">Global</abbr></a></h3>
                                        <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/woocommerce.html"><abbr title="\WooCommerce">WooCommerce</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/woocommerce-admin.html"><abbr title="\WooCommerce\Admin">Admin</abbr></a></li>
                                    </ul>
                            <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/automattic.html"><abbr title="\Automattic">Automattic</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/automattic-woocommerce.html"><abbr title="\Automattic\WooCommerce">WooCommerce</abbr></a></li>
                                    </ul>
                        </section>

        <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                    <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerce.html"><abbr title="\WooCommerce">WooCommerce</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WooCommerce-Classes.html"><abbr title="\WooCommerce\Classes">Classes</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Abstracts.html"><abbr title="\WooCommerce\Abstracts">Abstracts</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Admin.html"><abbr title="\WooCommerce\Admin">Admin</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Helper.html"><abbr title="\WooCommerce\Helper">Helper</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Views.html"><abbr title="\WooCommerce\Views">Views</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Templates.html"><abbr title="\WooCommerce\Templates">Templates</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Reports.html"><abbr title="\WooCommerce\Reports">Reports</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Blocks.html"><abbr title="\WooCommerce\Blocks">Blocks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-RestApi.html"><abbr title="\WooCommerce\RestApi">RestApi</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-CLI.html"><abbr title="\WooCommerce\CLI">CLI</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-l10n.html"><abbr title="\WooCommerce\l10n">l10n</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Webhooks.html"><abbr title="\WooCommerce\Webhooks">Webhooks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-DataStores.html"><abbr title="\WooCommerce\DataStores">DataStores</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Emails.html"><abbr title="\WooCommerce\Emails">Emails</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Export.html"><abbr title="\WooCommerce\Export">Export</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Gateways.html"><abbr title="\WooCommerce\Gateways">Gateways</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-PayPal.html"><abbr title="\WooCommerce\PayPal">PayPal</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Import.html"><abbr title="\WooCommerce\Import">Import</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Integrations.html"><abbr title="\WooCommerce\Integrations">Integrations</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Interfaces.html"><abbr title="\WooCommerce\Interfaces">Interfaces</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Interface.html"><abbr title="\WooCommerce\Interface">Interface</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-LogHandlers.html"><abbr title="\WooCommerce\LogHandlers">LogHandlers</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-PaymentTokens.html"><abbr title="\WooCommerce\PaymentTokens">PaymentTokens</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Utilities.html"><abbr title="\WooCommerce\Utilities">Utilities</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Shipping.html"><abbr title="\WooCommerce\Shipping">Shipping</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Shortcodes.html"><abbr title="\WooCommerce\Shortcodes">Shortcodes</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Tracks.html"><abbr title="\WooCommerce\Tracks">Tracks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Traits.html"><abbr title="\WooCommerce\Traits">Traits</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Functions.html"><abbr title="\WooCommerce\Functions">Functions</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-WCCom.html"><abbr title="\WooCommerce\WCCom">WCCom</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-WCCOM.html"><abbr title="\WooCommerce\WCCOM">WCCOM</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Widgets.html"><abbr title="\WooCommerce\Widgets">Widgets</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Uninstaller.html"><abbr title="\WooCommerce\Uninstaller">Uninstaller</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WoocommerceAdmin.html"><abbr title="\WoocommerceAdmin">WoocommerceAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WoocommerceNavigation.html"><abbr title="\WoocommerceNavigation">WoocommerceNavigation</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/Automattic.html"><abbr title="\Automattic">Automattic</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/Automattic-WooCommerce.html"><abbr title="\Automattic\WooCommerce">WooCommerce</abbr></a></li>
                            </ul>
                        </section>
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../indices/files.html">Files</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../hooks/hooks.html">Hooks Reference</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">class-wc-admin-menus.php</h2>

                

        
                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php
/**
 * Setup menus in WP admin.
 *
 * @package WooCommerce\Admin
 * @version 2.5.0
 */

use Automattic\WooCommerce\Internal\Admin\Orders\COTRedirectionController;
use Automattic\WooCommerce\Internal\Admin\Orders\PageController as Custom_Orders_PageController;
use Automattic\WooCommerce\Internal\DataStores\Orders\CustomOrdersTableController;
use Automattic\WooCommerce\Admin\Features\Features;

defined( &#039;ABSPATH&#039; ) || exit;

if ( class_exists( &#039;WC_Admin_Menus&#039;, false ) ) {
	return new WC_Admin_Menus();
}

/**
 * WC_Admin_Menus Class.
 */
class WC_Admin_Menus {

	/**
	 * Hook in tabs.
	 */
	public function __construct() {
		// Add menus.
		add_action( &#039;admin_menu&#039;, array( $this, &#039;menu_highlight&#039; ) );
		add_action( &#039;admin_menu&#039;, array( $this, &#039;menu_order_count&#039; ) );
		add_action( &#039;admin_menu&#039;, array( $this, &#039;maybe_add_new_product_management_experience&#039; ) );
		add_action( &#039;admin_menu&#039;, array( $this, &#039;admin_menu&#039; ), 9 );
		add_action( &#039;admin_menu&#039;, array( $this, &#039;orders_menu&#039; ), 9 );
		add_action( &#039;admin_menu&#039;, array( $this, &#039;reports_menu&#039; ), 20 );
		add_action( &#039;admin_menu&#039;, array( $this, &#039;settings_menu&#039; ), 50 );
		add_action( &#039;admin_menu&#039;, array( $this, &#039;status_menu&#039; ), 60 );

		if ( apply_filters( &#039;woocommerce_show_addons_page&#039;, true ) ) {
			add_action( &#039;admin_menu&#039;, array( $this, &#039;addons_menu&#039; ), 70 );
		}

		add_filter( &#039;menu_order&#039;, array( $this, &#039;menu_order&#039; ) );
		add_filter( &#039;custom_menu_order&#039;, array( $this, &#039;custom_menu_order&#039; ) );
		add_filter( &#039;set-screen-option&#039;, array( $this, &#039;set_screen_option&#039; ), 10, 3 );

		// Add endpoints custom URLs in Appearance &gt; Menus &gt; Pages.
		add_action( &#039;admin_head-nav-menus.php&#039;, array( $this, &#039;add_nav_menu_meta_boxes&#039; ) );

		// Admin bar menus.
		if ( apply_filters( &#039;woocommerce_show_admin_bar_visit_store&#039;, true ) ) {
			add_action( &#039;admin_bar_menu&#039;, array( $this, &#039;admin_bar_menus&#039; ), 31 );
		}

		// Handle saving settings earlier than load-{page} hook to avoid race conditions in conditional menus.
		add_action( &#039;wp_loaded&#039;, array( $this, &#039;save_settings&#039; ) );
	}

	/**
	 * Add menu items.
	 */
	public function admin_menu() {
		global $menu, $admin_page_hooks;

		$woocommerce_icon = &#039;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGZpbGw9IiNhMmFhYjIiIGQ9Ik02MTIuMTkyIDQyNi4zMzZjMC02Ljg5Ni0zLjEzNi01MS42LTI4LTUxLjYtMzcuMzYgMC00Ni43MDQgNzIuMjU2LTQ2LjcwNCA4Mi42MjQgMCAzLjQwOCAzLjE1MiA1OC40OTYgMjguMDMyIDU4LjQ5NiAzNC4xOTItLjAzMiA0Ni42NzItNzIuMjg4IDQ2LjY3Mi04OS41MnptMjAyLjE5MiAwYzAtNi44OTYtMy4xNTItNTEuNi0yOC4wMzItNTEuNi0zNy4yOCAwLTQ2LjYwOCA3Mi4yNTYtNDYuNjA4IDgyLjYyNCAwIDMuNDA4IDMuMDcyIDU4LjQ5NiAyNy45NTIgNTguNDk2IDM0LjE5Mi0uMDMyIDQ2LjY4OC03Mi4yODggNDYuNjg4LTg5LjUyek0xNDEuMjk2Ljc2OGMtNjguMjI0IDAtMTIzLjUwNCA1NS40ODgtMTIzLjUwNCAxMjMuOTJ2NjUwLjcyYzAgNjguNDMyIDU1LjI5NiAxMjMuOTIgMTIzLjUwNCAxMjMuOTJoMzM5LjgwOGwxMjMuNTA0IDEyMy45MzZWODk5LjMyOGgyNzguMDQ4YzY4LjIyNCAwIDEyMy41Mi01NS40NzIgMTIzLjUyLTEyMy45MnYtNjUwLjcyYzAtNjguNDMyLTU1LjI5Ni0xMjMuOTItMTIzLjUyLTEyMy45MmgtNzQxLjM2em01MjYuODY0IDQyMi4xNmMwIDU1LjA4OC0zMS4wODggMTU0Ljg4LTEwMi42NCAxNTQuODgtNi4yMDggMC0xOC40OTYtMy42MTYtMjUuNDI0LTYuMDE2LTMyLjUxMi0xMS4xNjgtNTAuMTkyLTQ5LjY5Ni01Mi4zNTItNjYuMjU2IDAgMC0zLjA3Mi0xNy43OTItMy4wNzItNDAuNzUyIDAtMjIuOTkyIDMuMDcyLTQ1LjMyOCAzLjA3Mi00NS4zMjggMTUuNTUyLTc1LjcyOCA0My41NTItMTA2LjczNiA5Ni40NDgtMTA2LjczNiA1OS4wNzItLjAzMiA4My45NjggNTguNTI4IDgzLjk2OCAxMTAuMjA4ek00ODYuNDk2IDMwMi40YzAgMy4zOTItNDMuNTUyIDE0MS4xNjgtNDMuNTUyIDIxMy40MjR2NzUuNzEyYy0yLjU5MiAxMi4wOC00LjE2IDI0LjE0NC0yMS44MjQgMjQuMTQ0LTQ2LjYwOCAwLTg4Ljg4LTE1MS40NzItOTIuMDE2LTE2MS44NC02LjIwOCA2Ljg5Ni02Mi4yNCAxNjEuODQtOTYuNDQ4IDE2MS44NC0yNC44NjQgMC00My41NTItMTEzLjY0OC00Ni42MDgtMTIzLjkzNkMxNzYuNzA0IDQzNi42NzIgMTYwIDMzNC4yMjQgMTYwIDMyNy4zMjhjMC0yMC42NzIgMS4xNTItMzguNzM2IDI2LjA0OC0zOC43MzYgNi4yMDggMCAyMS42IDYuMDY0IDIzLjcxMiAxNy4xNjggMTEuNjQ4IDYyLjAzMiAxNi42ODggMTIwLjUxMiAyOS4xNjggMTg1Ljk2OCAxLjg1NiAyLjkyOCAxLjUwNCA3LjAwOCA0LjU2IDEwLjQzMiAzLjE1Mi0xMC4yODggNjYuOTI4LTE2OC43ODQgOTQuOTYtMTY4Ljc4NCAyMi41NDQgMCAzMC40IDQ0LjU5MiAzMy41MzYgNjEuODI0IDYuMjA4IDIwLjY1NiAxMy4wODggNTUuMjE2IDIyLjQxNiA4Mi43NTIgMC0xMy43NzYgMTIuNDgtMjAzLjEyIDY1LjM5Mi0yMDMuMTIgMTguNTkyLjAzMiAyNi43MDQgNi45MjggMjYuNzA0IDI3LjU2OHpNODcwLjMyIDQyMi45MjhjMCA1NS4wODgtMzEuMDg4IDE1NC44OC0xMDIuNjQgMTU0Ljg4LTYuMTkyIDAtMTguNDQ4LTMuNjE2LTI1LjQyNC02LjAxNi0zMi40MzItMTEuMTY4LTUwLjE3Ni00OS42OTYtNTIuMjg4LTY2LjI1NiAwIDAtMy44ODgtMTcuOTItMy44ODgtNDAuODk2czMuODg4LTQ1LjE4NCAzLjg4OC00NS4xODRjMTUuNTUyLTc1LjcyOCA0My40ODgtMTA2LjczNiA5Ni4zODQtMTA2LjczNiA1OS4xMDQtLjAzMiA4My45NjggNTguNTI4IDgzLjk2OCAxMTAuMjA4eiIvPjwvc3ZnPg==&#039;;

		if ( self::can_view_woocommerce_menu_item() ) {
			$menu[] = array( &#039;&#039;, &#039;read&#039;, &#039;separator-woocommerce&#039;, &#039;&#039;, &#039;wp-menu-separator woocommerce&#039; ); // WPCS: override ok.
		}

		add_menu_page( __( &#039;WooCommerce&#039;, &#039;woocommerce&#039; ), __( &#039;WooCommerce&#039;, &#039;woocommerce&#039; ), &#039;edit_others_shop_orders&#039;, &#039;woocommerce&#039;, null, $woocommerce_icon, &#039;55.5&#039; );

		// Work around https://github.com/woocommerce/woocommerce/issues/35677 (and related https://core.trac.wordpress.org/ticket/18857).
		// Translating the menu item breaks screen IDs and page hooks, so we force the hookname to be untranslated.
		$admin_page_hooks[&#039;woocommerce&#039;] = &#039;woocommerce&#039;; // phpcs:ignore WordPress.WP.GlobalVariablesOverride.Prohibited

		add_submenu_page( &#039;edit.php?post_type=product&#039;, __( &#039;Attributes&#039;, &#039;woocommerce&#039; ), __( &#039;Attributes&#039;, &#039;woocommerce&#039; ), &#039;manage_product_terms&#039;, &#039;product_attributes&#039;, array( $this, &#039;attributes_page&#039; ) );
	}

	/**
	 * Add menu item.
	 */
	public function reports_menu() {
		if ( self::can_view_woocommerce_menu_item() ) {
			add_submenu_page( &#039;woocommerce&#039;, __( &#039;Reports&#039;, &#039;woocommerce&#039; ), __( &#039;Reports&#039;, &#039;woocommerce&#039; ), &#039;view_woocommerce_reports&#039;, &#039;wc-reports&#039;, array( $this, &#039;reports_page&#039; ) );
		} else {
			add_menu_page( __( &#039;Sales reports&#039;, &#039;woocommerce&#039; ), __( &#039;Sales reports&#039;, &#039;woocommerce&#039; ), &#039;view_woocommerce_reports&#039;, &#039;wc-reports&#039;, array( $this, &#039;reports_page&#039; ), &#039;dashicons-chart-bar&#039;, &#039;55.6&#039; );
		}
	}

	/**
	 * Add menu item.
	 */
	public function settings_menu() {
		$settings_page = add_submenu_page( &#039;woocommerce&#039;, __( &#039;WooCommerce settings&#039;, &#039;woocommerce&#039; ), __( &#039;Settings&#039;, &#039;woocommerce&#039; ), &#039;manage_woocommerce&#039;, &#039;wc-settings&#039;, array( $this, &#039;settings_page&#039; ) );

		add_action( &#039;load-&#039; . $settings_page, array( $this, &#039;settings_page_init&#039; ) );
	}

	/**
	 * Check if the user can access the top-level WooCommerce item.
	 */
	public static function can_view_woocommerce_menu_item() {
		return current_user_can( &#039;edit_others_shop_orders&#039; );
	}

	/**
	 * Loads gateways and shipping methods into memory for use within settings.
	 */
	public function settings_page_init() {
		WC()-&gt;payment_gateways();
		WC()-&gt;shipping();

		// Include settings pages.
		WC_Admin_Settings::get_settings_pages();

		// Add any posted messages.
		if ( ! empty( $_GET[&#039;wc_error&#039;] ) ) { // WPCS: input var okay, CSRF ok.
			WC_Admin_Settings::add_error( wp_kses_post( wp_unslash( $_GET[&#039;wc_error&#039;] ) ) ); // WPCS: input var okay, CSRF ok.
		}

		if ( ! empty( $_GET[&#039;wc_message&#039;] ) ) { // WPCS: input var okay, CSRF ok.
			WC_Admin_Settings::add_message( wp_kses_post( wp_unslash( $_GET[&#039;wc_message&#039;] ) ) ); // WPCS: input var okay, CSRF ok.
		}

		do_action( &#039;woocommerce_settings_page_init&#039; );
	}

	/**
	 * Handle saving of settings.
	 *
	 * @return void
	 */
	public function save_settings() {
		global $current_tab, $current_section;

		// We should only save on the settings page.
		if ( ! is_admin() || ! isset( $_GET[&#039;page&#039;] ) || &#039;wc-settings&#039; !== $_GET[&#039;page&#039;] ) { // phpcs:ignore WordPress.Security.NonceVerification.Recommended
			return;
		}

		// Include settings pages.
		WC_Admin_Settings::get_settings_pages();

		// Get current tab/section.
		$current_tab     = empty( $_GET[&#039;tab&#039;] ) ? &#039;general&#039; : sanitize_title( wp_unslash( $_GET[&#039;tab&#039;] ) ); // WPCS: input var okay, CSRF ok.
		$current_section = empty( $_REQUEST[&#039;section&#039;] ) ? &#039;&#039; : sanitize_title( wp_unslash( $_REQUEST[&#039;section&#039;] ) ); // WPCS: input var okay, CSRF ok.

		// Save settings if data has been posted.
		if ( &#039;&#039; !== $current_section &amp;&amp; apply_filters( &quot;woocommerce_save_settings_{$current_tab}_{$current_section}&quot;, ! empty( $_POST[&#039;save&#039;] ) ) ) { // WPCS: input var okay, CSRF ok.
			WC_Admin_Settings::save();
		} elseif ( &#039;&#039; === $current_section &amp;&amp; apply_filters( &quot;woocommerce_save_settings_{$current_tab}&quot;, ! empty( $_POST[&#039;save&#039;] ) ) ) { // WPCS: input var okay, CSRF ok.
			WC_Admin_Settings::save();
		}
	}

	/**
	 * Add menu item.
	 */
	public function status_menu() {
		add_submenu_page( &#039;woocommerce&#039;, __( &#039;WooCommerce status&#039;, &#039;woocommerce&#039; ), __( &#039;Status&#039;, &#039;woocommerce&#039; ), &#039;manage_woocommerce&#039;, &#039;wc-status&#039;, array( $this, &#039;status_page&#039; ) );
	}

	/**
	 * Addons menu item.
	 */
	public function addons_menu() {
		$count_html = WC_Helper_Updater::get_updates_count_html();
		/* translators: %s: extensions count */
		$menu_title = sprintf( __( &#039;Extensions %s&#039;, &#039;woocommerce&#039; ), $count_html );
		add_submenu_page( &#039;woocommerce&#039;, __( &#039;WooCommerce extensions&#039;, &#039;woocommerce&#039; ), $menu_title, &#039;manage_woocommerce&#039;, &#039;wc-addons&#039;, array( $this, &#039;addons_page&#039; ) );
	}

	/**
	 * Highlights the correct top level admin menu item for post type add screens.
	 */
	public function menu_highlight() {
		global $parent_file, $submenu_file, $post_type;

		switch ( $post_type ) {
			case &#039;shop_order&#039;:
			case &#039;shop_coupon&#039;:
				$parent_file = &#039;woocommerce&#039;; // WPCS: override ok.
				break;
			case &#039;product&#039;:
				$screen = get_current_screen();
				if ( $screen &amp;&amp; taxonomy_is_product_attribute( $screen-&gt;taxonomy ) ) {
					$submenu_file = &#039;product_attributes&#039;; // WPCS: override ok.
					$parent_file  = &#039;edit.php?post_type=product&#039;; // WPCS: override ok.
				}
				break;
		}
	}

	/**
	 * Adds the order processing count to the menu.
	 */
	public function menu_order_count() {
		global $submenu;

		if ( isset( $submenu[&#039;woocommerce&#039;] ) ) {
			// Remove &#039;WooCommerce&#039; sub menu item.
			unset( $submenu[&#039;woocommerce&#039;][0] );

			// Add count if user has access.
			if ( apply_filters( &#039;woocommerce_include_processing_order_count_in_menu&#039;, true ) &amp;&amp; current_user_can( &#039;edit_others_shop_orders&#039; ) ) {
				$order_count = apply_filters( &#039;woocommerce_menu_order_count&#039;, wc_processing_order_count() );

				if ( $order_count ) {
					foreach ( $submenu[&#039;woocommerce&#039;] as $key =&gt; $menu_item ) {
						if ( 0 === strpos( $menu_item[0], _x( &#039;Orders&#039;, &#039;Admin menu name&#039;, &#039;woocommerce&#039; ) ) ) {
							$submenu[&#039;woocommerce&#039;][ $key ][0] .= &#039; &lt;span class=&quot;awaiting-mod update-plugins count-&#039; . esc_attr( $order_count ) . &#039;&quot;&gt;&lt;span class=&quot;processing-count&quot;&gt;&#039; . number_format_i18n( $order_count ) . &#039;&lt;/span&gt;&lt;/span&gt;&#039;; // phpcs:ignore WordPress.WP.GlobalVariablesOverride.Prohibited
							break;
						}
					}
				}
			}
		}
	}

	/**
	 * Reorder the WC menu items in admin.
	 *
	 * @param int $menu_order Menu order.
	 * @return array
	 */
	public function menu_order( $menu_order ) {
		// Initialize our custom order array.
		$woocommerce_menu_order = array();

		// Get the index of our custom separator.
		$woocommerce_separator = array_search( &#039;separator-woocommerce&#039;, $menu_order, true );

		// Get index of product menu.
		$woocommerce_product = array_search( &#039;edit.php?post_type=product&#039;, $menu_order, true );

		// Loop through menu order and do some rearranging.
		foreach ( $menu_order as $index =&gt; $item ) {

			if ( &#039;woocommerce&#039; === $item ) {
				$woocommerce_menu_order[] = &#039;separator-woocommerce&#039;;
				$woocommerce_menu_order[] = $item;
				$woocommerce_menu_order[] = &#039;edit.php?post_type=product&#039;;
				unset( $menu_order[ $woocommerce_separator ] );
				unset( $menu_order[ $woocommerce_product ] );
			} elseif ( ! in_array( $item, array( &#039;separator-woocommerce&#039; ), true ) ) {
				$woocommerce_menu_order[] = $item;
			}
		}

		// Return order.
		return $woocommerce_menu_order;
	}

	/**
	 * Custom menu order.
	 *
	 * @param bool $enabled Whether custom menu ordering is already enabled.
	 * @return bool
	 */
	public function custom_menu_order( $enabled ) {
		return $enabled || self::can_view_woocommerce_menu_item();
	}

	/**
	 * Validate screen options on update.
	 *
	 * @param bool|int $status Screen option value. Default false to skip.
	 * @param string   $option The option name.
	 * @param int      $value  The number of rows to use.
	 */
	public function set_screen_option( $status, $option, $value ) {
		if ( in_array( $option, array( &#039;woocommerce_keys_per_page&#039;, &#039;woocommerce_webhooks_per_page&#039; ), true ) ) {
			return $value;
		}

		return $status;
	}

	/**
	 * Init the reports page.
	 */
	public function reports_page() {
		WC_Admin_Reports::output();
	}

	/**
	 * Init the settings page.
	 */
	public function settings_page() {
		WC_Admin_Settings::output();
	}

	/**
	 * Init the attributes page.
	 */
	public function attributes_page() {
		WC_Admin_Attributes::output();
	}

	/**
	 * Init the status page.
	 */
	public function status_page() {
		WC_Admin_Status::output();
	}

	/**
	 * Init the addons page.
	 */
	public function addons_page() {
		WC_Admin_Addons::output();
	}

	/**
	 * Link to the order admin list table from the main WooCommerce menu.
	 *
	 * @return void
	 */
	public function orders_menu(): void {
		if ( wc_get_container()-&gt;get( CustomOrdersTableController::class )-&gt;custom_orders_table_usage_is_enabled() ) {
			wc_get_container()-&gt;get( Custom_Orders_PageController::class )-&gt;setup();
		} else {
			wc_get_container()-&gt;get( COTRedirectionController::class )-&gt;setup();
		}
	}

	/**
	 * Add custom nav meta box.
	 *
	 * Adapted from http://www.johnmorrisonline.com/how-to-add-a-fully-functional-custom-meta-box-to-wordpress-navigation-menus/.
	 */
	public function add_nav_menu_meta_boxes() {
		add_meta_box( &#039;woocommerce_endpoints_nav_link&#039;, __( &#039;WooCommerce endpoints&#039;, &#039;woocommerce&#039; ), array( $this, &#039;nav_menu_links&#039; ), &#039;nav-menus&#039;, &#039;side&#039;, &#039;low&#039; );
	}

	/**
	 * Output menu links.
	 */
	public function nav_menu_links() {
		// Get items from account menu.
		$endpoints = wc_get_account_menu_items();

		// Remove dashboard item.
		if ( isset( $endpoints[&#039;dashboard&#039;] ) ) {
			unset( $endpoints[&#039;dashboard&#039;] );
		}

		// Include missing lost password.
		$endpoints[&#039;lost-password&#039;] = __( &#039;Lost password&#039;, &#039;woocommerce&#039; );

		$endpoints = apply_filters( &#039;woocommerce_custom_nav_menu_items&#039;, $endpoints );

		?&gt;
		&lt;div id=&quot;posttype-woocommerce-endpoints&quot; class=&quot;posttypediv&quot;&gt;
			&lt;div id=&quot;tabs-panel-woocommerce-endpoints&quot; class=&quot;tabs-panel tabs-panel-active&quot;&gt;
				&lt;ul id=&quot;woocommerce-endpoints-checklist&quot; class=&quot;categorychecklist form-no-clear&quot;&gt;
					&lt;?php
					$i = -1;
					foreach ( $endpoints as $key =&gt; $value ) :
						?&gt;
						&lt;li&gt;
							&lt;label class=&quot;menu-item-title&quot;&gt;
								&lt;input type=&quot;checkbox&quot; class=&quot;menu-item-checkbox&quot; name=&quot;menu-item[&lt;?php echo esc_attr( $i ); ?&gt;][menu-item-object-id]&quot; value=&quot;&lt;?php echo esc_attr( $i ); ?&gt;&quot; /&gt; &lt;?php echo esc_html( $value ); ?&gt;
							&lt;/label&gt;
							&lt;input type=&quot;hidden&quot; class=&quot;menu-item-type&quot; name=&quot;menu-item[&lt;?php echo esc_attr( $i ); ?&gt;][menu-item-type]&quot; value=&quot;custom&quot; /&gt;
							&lt;input type=&quot;hidden&quot; class=&quot;menu-item-title&quot; name=&quot;menu-item[&lt;?php echo esc_attr( $i ); ?&gt;][menu-item-title]&quot; value=&quot;&lt;?php echo esc_attr( $value ); ?&gt;&quot; /&gt;
							&lt;input type=&quot;hidden&quot; class=&quot;menu-item-url&quot; name=&quot;menu-item[&lt;?php echo esc_attr( $i ); ?&gt;][menu-item-url]&quot; value=&quot;&lt;?php echo esc_url( wc_get_account_endpoint_url( $key ) ); ?&gt;&quot; /&gt;
							&lt;input type=&quot;hidden&quot; class=&quot;menu-item-classes&quot; name=&quot;menu-item[&lt;?php echo esc_attr( $i ); ?&gt;][menu-item-classes]&quot; /&gt;
						&lt;/li&gt;
						&lt;?php
						$i--;
					endforeach;
					?&gt;
				&lt;/ul&gt;
			&lt;/div&gt;
			&lt;p class=&quot;button-controls&quot; data-items-type=&quot;posttype-woocommerce-endpoints&quot;&gt;
				&lt;span class=&quot;list-controls&quot;&gt;
					&lt;label&gt;
						&lt;input type=&quot;checkbox&quot; class=&quot;select-all&quot; /&gt;
						&lt;?php esc_html_e( &#039;Select all&#039;, &#039;woocommerce&#039; ); ?&gt;
					&lt;/label&gt;
				&lt;/span&gt;
				&lt;span class=&quot;add-to-menu&quot;&gt;
					&lt;button type=&quot;submit&quot; class=&quot;button-secondary submit-add-to-menu right&quot; value=&quot;&lt;?php esc_attr_e( &#039;Add to menu&#039;, &#039;woocommerce&#039; ); ?&gt;&quot; name=&quot;add-post-type-menu-item&quot; id=&quot;submit-posttype-woocommerce-endpoints&quot;&gt;&lt;?php esc_html_e( &#039;Add to menu&#039;, &#039;woocommerce&#039; ); ?&gt;&lt;/button&gt;
					&lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;
				&lt;/span&gt;
			&lt;/p&gt;
		&lt;/div&gt;
		&lt;?php
	}

	/**
	 * Add the &quot;Visit Store&quot; link in admin bar main menu.
	 *
	 * @since 2.4.0
	 * @param WP_Admin_Bar $wp_admin_bar Admin bar instance.
	 */
	public function admin_bar_menus( $wp_admin_bar ) {
		if ( ! is_admin() || ! is_admin_bar_showing() ) {
			return;
		}

		// Show only when the user is a member of this site, or they&#039;re a super admin.
		if ( ! is_user_member_of_blog() &amp;&amp; ! is_super_admin() ) {
			return;
		}

		// Don&#039;t display when shop page is the same of the page on front.
		if ( intval( get_option( &#039;page_on_front&#039; ) ) === wc_get_page_id( &#039;shop&#039; ) ) {
			return;
		}

		// Add an option to visit the store.
		$wp_admin_bar-&gt;add_node(
			array(
				&#039;parent&#039; =&gt; &#039;site-name&#039;,
				&#039;id&#039;     =&gt; &#039;view-store&#039;,
				&#039;title&#039;  =&gt; __( &#039;Visit Store&#039;, &#039;woocommerce&#039; ),
				&#039;href&#039;   =&gt; wc_get_page_permalink( &#039;shop&#039; ),
			)
		);
	}

	/**
	 * Maybe add new management product experience.
	 */
	public function maybe_add_new_product_management_experience() {
		if ( Features::is_enabled( &#039;new-product-management-experience&#039; ) || \Automattic\WooCommerce\Utilities\FeaturesUtil::feature_is_enabled( &#039;product_block_editor&#039; ) ) {
			global $submenu;
			if ( isset( $submenu[&#039;edit.php?post_type=product&#039;][10] ) ) {
				// Disable phpcs since we need to override submenu classes.
				// Note that `phpcs:ignore WordPress.Variables.GlobalVariables.OverrideProhibited` does not work to disable this check.
				// phpcs:disable
				$submenu[&#039;edit.php?post_type=product&#039;][10][2] = &#039;admin.php?page=wc-admin&amp;path=/add-product&#039;;
				// phps:enableWordPress.Variables.GlobalVariables.OverrideProhibited
			}
		}
	}
}

return new WC_Admin_Menus();
</code></pre>
            </article>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <footer class="phpdocumentor phpdocumentor-footer">
    <div class="phpdocumentor-section">
        <span>WooCommerce Code Reference API documentation generated by <a href="http://www.phpdoc.org/">phpDocumentor</a> on August 24th, 2023 at 08:49 am.</span>
    </div>
</footer>

    <script>
        cssVars({});
    </script>
    <script>
        var searchParams = {
            'searchIndex': '..\/js\/searchIndex.json'
        };
    </script>
    <script src="../js/searchIndex.js?updated=1692866946"></script>
    <script src="../js/search.js?updated=1692866946"></script>
</body>
</html>
